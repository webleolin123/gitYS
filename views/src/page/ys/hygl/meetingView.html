<!DOCTYPE html>
<html class="iframe-h">

<head>
    <meta charset="UTF-8">
    <title>会议管理-新增</title>
    <meta content="webkit" name="renderer" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link class="favicon" href="./../../../../../../../../src/images/ico/favicon.ico" rel="shortcut icon"
        type="image/x-icon">
    <link class="favicon" href="./../../../../src/images/ico/favicon.ico" rel="icon" type="image/x-icon">
    <link class="favicon" href="./../../../../src/images/ico/favicon.ico" rel="bookmark" type="image/x-icon">
    <link rel="stylesheet" href="./../../../../src/js/layui/css/layui.css" />
    <link href="./../../../../src/css/public.css?v1.01" rel="stylesheet" />
    <link href="./../../../../src/js/lib/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <script src="./../../../../src/js/lib/jquery.1.12.3.js"></script>
    <style>
        body {
            background: #f8f8f8;
        }

        .load-btn,
        .check-btn,
        .right-btn {
            position: absolute;
            top: 0;
            right: 0;
            border-radius: 3px;
        }

        .right70 {
            right: 70px;
        }

        .relative {
            position: relative;
        }

        .padRt64 {
            padding-right: 64px;
        }

        li {
            cursor: pointer;
        }

        .zsBga {
            color: purple;
            vertical-align: 1px;
            opacity: 0.5;
        }

        .hytitle {
            font-size: 16px;
        }

        .hyinput {
            border: 1px solid transparent !important;
            border-bottom-color: red !important;
        }

        .layui-unselect {
            border-color: #f56c6c;
            border-top-style: none;
            border-right-style: none;
            border-left-style: none;
        }

        .layui-form-select .layui-edge {
            border-top-color: #f56c6c;
        }

        a.layui-layer-ico.layui-layer-max {
            display: none;
        }

        a.layui-layer-ico.layui-layer-max.layui-layer-maxmin {
            display: inline-block !important;
        }
        .layui-table-body .layui-none {
            border-bottom: 1px solid #e6e6e6;
        }
        .layui-colla-content{
            padding: 0;
        }
        /* .editView{
            display: none;
        } */
    </style>

</head>
<!--审议情况-编辑-->
<script type="text/html" id="edit-syForm">
    <div  class="edit-syForm">
        <div class="layui-card-body">
            <form class="layui-form form-theme3" name="edit-syForm">
                <div class="layui-card">
                    <div class="layui-card-header layui-card-header-custom">
                    <span><i></i>审议信息
                        <b class="zsBga"></b>
                    </span>
                    </div>
                    <div class="layui-card-body">
                        <div class="layui-row layui-col-space15">
                            <div class="layui-col-md12">
                                <div class="layui-form-item">
                                    <label class="layui-form-label"><b class="red">*</b>议题名称</label>
                                    <div class="layui-input-block" style="padding-right:80px;position:relative">
                                        <input type="text" lay-verify="subjectName" name="subjectName" placeholder="请输入" autocomplete="off"  class="layui-input hyinput" readonly>
                                        <button class="layui-btn" type="button" id="yaView" style="position:absolute;right:0;top:5px;"><i class="fa fa-search" aria-hidden="true"></i> 详情
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" name="subjectId">
                            <input type="hidden" readonly name="subjectCode" placeholder="请输入" autocomplete="off" class="layui-input hyinput">

                            <!-- <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">紧急程度</label>
                                        <div class="layui-input-block">
                                            <select name="exigence"  id="exigence" lay-filter="exigenceFilter">
                                                <option name="" value=""></option>
                                            </select>
                                        </div>
                                    </div>
                                </div>-->
                        </div>
                        <div class="layui-row layui-col-space15">
                            <input type="hidden" name="exigenceName">
                            <div class="layui-col-md6">
                                <div class="layui-form-item" id="titleOption" title="显示title">
                                    <label class="layui-form-label">审议类型</label>
									<div class="layui-input-block" title="此信息为议案填写部门编辑选择，需要编辑请通知议案编辑人员">
                                        <input type="text" lay-verify="deliberationName" id="deliberationName" name="deliberationName"  autocomplete="off" class="layui-input hyinput" readonly>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" name="deliberationName">
                            <div class="layui-col-md6">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">决议类别</label>
                                    <div class="layui-input-block">
                                        <input type="text" autocomplete="off" class="layui-input hyinput" readonly name="resultTypeName">
                                        
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" name="resultTypeName">
                            <!-- <div class="layui-col-md12">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label"><b class="red">*</b>是否上报国资委</label>
                                        <div class="layui-input-block">
                                            <select name="approvalFlag"  id="approvalFlag" lay-verify="approvalFlag" lay-filter="approvalFlagFilter">
                                                <option name="" value=""></option>
                                            </select>
                                        </div>
                                    </div>
                            </div>
                            <input type="hidden" name="approvalFlagName">-->
                        </div>
                        <div class="layui-row layui-col-space15">
                            <div class="layui-col-md12">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">汇报人</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="msSpeaker" id="msSpeaker" placeholder="请输入" autocomplete="off" class="layui-input hyinput" readonly="readonly"
                                               value="">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-row layui-col-space15">
                            <div class="layui-col-md12">
                                <div class="layui-form-item relative">
                                    <label class="layui-form-label">列席人员</label>
                                    <div class="layui-input-block">
                                        <input type="text" readonly id="attendances" name="attendances" placeholder="请输入" autocomplete="off" class="layui-input padRt64 hyinput"
                                               value="" lay-verify="attendances">
                                        <!--<button class="layui-btn layui-btn-radius right-btn" id="attendances-btn">编辑</button>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-row layui-col-space15">
                            <div class="layui-col-md12" id="syjg">
                                <div class="layui-form-item">
                                    <label class="layui-form-label"><b class="red">*</b>审议结果</label>
                                    <div class="layui-input-block">
                                        <input type="text" readonly id="passFlagName" name="passFlagName" placeholder="请输入" autocomplete="off" class="layui-input padRt64 hyinput"
                                               value="" lay-verify="passFlagName">
                                        <!-- <select name="passFlag" id="passFlag" lay-filter="passFlagFilter" lay-verify="passFlag">
                                            <option name="" value=""></option>
                                        </select> -->
                                        <!--<button class="layui-btn layui-btn-radius right-btn" permission-btn="meetingMgrDeliberationJs" id="passFlag-btn">计算</button>-->
                                    </div>
                                </div>
                                <input type="hidden" name="passFlagName">
                            </div>
                            <div class="layui-row layui-col-space15">
                                <div class="layui-col-md12">
                                    <div class="layui-form-item">
                                        <div class="layui-form-item">
                                            <label class="layui-form-label"><b class="red">*</b>审议结论</label>
                                            <div class="layui-input-block">
                                                <textarea name="subjectResult" readonly lay-verify="subjectResult" placeholder="请输入" class="layui-textarea hyinput"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display: none">
                    <div class="layui-card" style="margin-top: 10px">
                        <div class="layui-card-body">
                            <div class="layui-form-item" style="text-align: center;">
                                <button class="layui-btn" lay-submit lay-filter="formSubjectEdit"> <i class="layui-icon">&#x1005;</i>保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="layui-card">
                <div class="layui-card-header layui-card-header-custom hide">
                    <span><i></i>表决详情
                        <b class="zsBga"></b>
                    </span>
                </div>
                <div class="layui-card-body">
                    <span id="bjxq">
                        <div class="layui-row layui-col-space15">
                            <div class="layui-col-md12">
                                <div class="layui-form-item">
                                    <label class="layui-form-label hylabel layui-col-md2" style="width:130px;">表决情况</label>
                                    <div class="layui-input-block">
                                        <input type="text" readonly name="bjqk" placeholder="根据下方列表自动生成" autocomplete="off" class="layui-input hyinput">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-row layui-col-space15" style="padding-left:130px;">
                            <div class="layui-col-md12">
                                <table id="bjTable" lay-filter="bjTable"></table>
                            </div>
                        </div>
                    </span>
                    
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1" style="width:135px;padding-left:35px;">
                            <div class="layui-form-item">
                                <label class="layui-form-label hylabel layui-col-md2">相关附件</label>
                            </div>
                        </div>
                        <div class="layui-col-md12" style="padding-left:135px;position:relative;top:-50px;">
                            <table id="subjectFileTable" lay-filter="subjectFileTable"></table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-card">
                
                <div class="layui-card-body">
                    <div class="layui-row layui-col-space15">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/html" id="deliberationToolBar">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrDeliberationAdd" lay-event="add">
            <i class="layui-icon">&#xe608;</i> 新增
        </button>
        <button class="layui-btn layui-btn-sm layui-btn-danger" permission-btn="meetingMgrDeliberationDel" lay-event="del">
            <i class="layui-icon">&#xe640;</i> 删除
        </button>
    </div>
</script>
<script type="text/html" id="bjTableOper">
    <a class="layui-btn layui-btn-xs" permission-btn="meetingMgrDeliberationEdit" lay-event="edit">编辑</a>
</script>
<script type="text/html" id="subjectFileToolBar">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrSubjectClAdd" lay-event="add">
            <i class="layui-icon">&#xe608;</i> 新增
        </button>
        <button class="layui-btn layui-btn-sm layui-btn-danger" permission-btn="meetingMgrSubjectClDel" lay-event="del">
            <i class="layui-icon">&#xe640;</i> 删除
        </button>
    </div>
</script>
<script type="text/html" id="subjectFileTableOper">
    <a class="layui-btn layui-btn-xs layui-btn-warm" permission-btn="meetingMgrSubjectView" lay-event="view">预览</a>
    <a class="layui-btn layui-btn-xs" permission-btn="meetingMgrSubjectClLoad" lay-event="load">下载</a>
</script>
<!--列席人员选择-->
<div class="set-attendanceForm hide">
    <div class="layui-card-body">
        <table id="attendanceTable" lay-filter="attendanceTable"></table>
        <script type="text/html" id="attendanceToolBar">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrAttendanceAdd" lay-event="add">
                    <i class="layui-icon">&#xe608;</i> 新增
                </button>
                <button class="layui-btn layui-btn-sm  layui-btn-danger" permission-btn="meetingMgrAttendanceDel" lay-event="del">
                    <i class="layui-icon">&#xe640;</i> 删除
                </button>
            </div>
        </script>
    </div>
</div>
<!--列席人员选择-添加-->
<div class="setAdd-attendanceForm hide">
    <div class="layui-card-body">
        <form class="layui-form form-theme3" name="setAdd-attendanceForm">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>列席人</label>
                        <div class="layui-input-block">
                            <input type="text" id="attendanceName" lay-verify="required" name="attendanceName"
                                placeholder="请输入" autocomplete="off" class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">职位</label>
                        <div class="layui-input-block">
                            <select name="position" id="position" lay-filter="positionFilter">
                                <option name="" value=""></option>
                            </select>
                        </div>
                    </div>
                    <input type="hidden" name="positionName">
                </div>
                <div style="display: none">
                    <div class="layui-card" style="margin-top: 10px">
                        <div class="layui-card-body">
                            <div class="layui-form-item" style="text-align: center;">
                                <button class="layui-btn" lay-submit lay-filter="formAttendanceAdd"
                                    id="formAttendanceAdd"> <i class="layui-icon">&#x1005;</i>保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<!--出席人员选择-->
<div class="set-attendeeForm hide">
    <div class="layui-card-body">
        <table id="attendeeTable" lay-filter="attendeeTable"></table>
        <script type="text/html" id="attendeeToolBar">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrAttendeeAdd" lay-event="add">
                    <i class="layui-icon">&#xe608;</i> 新增
                </button>
                <button class="layui-btn layui-btn-sm  layui-btn-danger" permission-btn="meetingMgrAttendeeDel" lay-event="del">
                    <i class="layui-icon">&#xe640;</i> 删除
                </button>
                <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrAttendeeChoose" lay-event="choose">
                    <i class="layui-icon">&#xe640;</i> 选择
                </button>
            </div>
        </script>
        <script type="text/html" id="attendeeTableOper">
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
        </script>
    </div>
</div>
<!--出席人员选择-添加-->
<div class="setAdd-attendeeForm hide">
    <div class="layui-card-body">
        <form class="layui-form form-theme3" name="setAdd-attendeeForm">
            <input type="hidden" name="attendeeId" class="layui-input hyinput">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">出席人员</label>
                        <div class="layui-input-block">
                            <input type="text" id="attendeeName" name="attendeeName" placeholder="请输入"
                                autocomplete="off" class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">职务名称</label>
                        <div class="layui-input-block">
                            <input type="text" id="attendeeJob" name="attendeeJob" placeholder="请输入" autocomplete="off"
                                class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">备注</label>
                        <div class="layui-input-block">
                            <textarea name="remark" id="remark" placeholder="请输入"
                                class="layui-textarea hyinput"></textarea>
                        </div>
                    </div>
                </div>
                <div style="display: none">
                    <div class="layui-card" style="margin-top: 10px">
                        <div class="layui-card-body">
                            <div class="layui-form-item" style="text-align: center;">
                                <button class="layui-btn" lay-submit lay-filter="formAttendeeAdd"> <i class="layui-icon">&#x1005;</i>保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<!--缺席人员选择-->
<div class="set-absentForm hide">
    <div class="layui-card-body">
        <table id="absentTable" lay-filter="absentTable"></table>
        <script type="text/html" id="absentToolBar">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrAttendeeAdd" lay-event="add">
                    <i class="layui-icon">&#xe608;</i> 新增
                </button>
                <button class="layui-btn layui-btn-sm  layui-btn-danger" permission-btn="meetingMgrAttendeeDel" lay-event="del">
                    <i class="layui-icon">&#xe640;</i> 删除
                </button>
                <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrAttendeeChoose" lay-event="choose">
                    <i class="layui-icon">&#xe640;</i> 选择
                </button>
            </div>
        </script>
        <script type="text/html" id="absentTableOper">
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
        </script>
    </div>
</div>

<!--缺席人员选择-添加-->
<div class="setAdd-absentForm hide">
    <div class="layui-card-body">
        <form class="layui-form form-theme3" name="setAdd-absentForm">
            <input type="hidden" name="attendeeId" class="layui-input hyinput">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">缺席人</label>
                        <div class="layui-input-block">
                            <input type="text" name="attendeeName" placeholder="请输入" autocomplete="off"
                                class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">缺席原因</label>
                        <div class="layui-input-block">
                            <input type="text" name="reason" placeholder="请输入" autocomplete="off"
                                class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">委托人</label>
                        <div class="layui-input-block">
                            <input type="text" name="assignor" placeholder="请输入" autocomplete="off"
                                class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">备注</label>
                        <div class="layui-input-block">
                            <textarea name="remark" placeholder="请输入" class="layui-textarea hyinput"></textarea>
                        </div>
                    </div>
                </div>
                <div style="display: none">
                    <div class="layui-card" style="margin-top: 10px">
                        <div class="layui-card-body">
                            <div class="layui-form-item" style="text-align: center;">
                                <button class="layui-btn" lay-submit lay-filter="formAbsentAdd"> <i class="layui-icon">&#x1005;</i>保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!--常设列席选择-->
<div class="set-attenderForm hide">
    <div class="layui-card-body">
        <table id="attenderTable" lay-filter="attenderTable"></table>
        <script type="text/html" id="attenderToolBar">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-sm" permission-btn="meetingMgrAttenderAdd" lay-event="add">
                    <i class="layui-icon">&#xe608;</i> 新增
                </button>
                <button class="layui-btn layui-btn-sm  layui-btn-danger" permission-btn="meetingMgrAttenderDel" lay-event="del">
                    <i class="layui-icon">&#xe640;</i> 删除
                </button>
                <!--<button class="layui-btn layui-btn-sm" permission-btn="meetingMgrAttenderChoose" lay-event="choose">-->
                    <!--<i class="layui-icon">&#xe640;</i> 选择-->
                <!--</button>-->
            </div>
        </script>
        <script type="text/html" id="attenderTableOper">
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
        </script>
    </div>
</div>
<!--常设列席选择-添加-->
<div class="setAdd-attenderForm hide">
    <div class="layui-card-body">
        <form class="layui-form form-theme3" name="setAdd-attenderForm">
            <input type="hidden" name="attenderId" class="layui-input hyinput">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>人员姓名</label>
                        <div class="layui-input-block">
                            <input type="text" id="attenderSuName" lay-verify="required" name="attenderSuName"
                                placeholder="请输入" autocomplete="off" class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>职务名称</label>
                        <div class="layui-input-block">
                            <input type="text" id="attenderJob" name="attenderJob" lay-verify="required"
                                placeholder="请输入" autocomplete="off" class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>人员排序</label>
                        <div class="layui-input-block">
                            <input type="number" name="attenderSort" placeholder="请输入" relay-verify="required"
                                autocomplete="off" class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>备注信息</label>
                        <div class="layui-input-block">
                            <textarea name="remark" class="layui-textarea" placeholder="请输入备注信息"></textarea>
                        </div>
                    </div>
                </div>
                <div style="display: none">
                    <div class="layui-card" style="margin-top: 10px">
                        <div class="layui-card-body">
                            <div class="layui-form-item" style="text-align: center;">
                                <button class="layui-btn" lay-submit lay-filter="formAttenderAdd"> <i class="layui-icon">&#x1005;</i>保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="memberTable hide">
    <div class="layui-card-body">
        <table id="memberTable" lay-filter="memberTable"></table>
    </div>
</div>

<!--会议资料-添加-->
<script type="text/html" id="hyzl-add">
    <div class="layui-card-body">
        <form class="layui-form form-theme3" name="hyzl-add">
            <div class="layui-row layui-col-space10">
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">资料类型：</label>
                        <div class="layui-input-block">
                            <select name="fiFileType" id="meetingFileType" lay-filter="meetingFileType">
                                <option value="">请选择</option>
                                <!-- <option value="NOTICE">会议通知</option>
                                <option value="SUMMARY">会议纪要</option>
                                <option value="RECORD">会议记录</option>
                                <option value="RESOLUTION">会议决议</option> -->
                            </select>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12 printTimeArea" style="display: none">
                    <div class="layui-form-item">
                        <label class="layui-form-label">印发日期：</label>
                        <div class="layui-input-block">
                            <input type="text" name="printTime" class="layui-input" placeholder="请选择">
                        </div>
                    </div>
                </div>

                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <!-- <div class="layui-upload">
                            <button class="layui-btn layui-btn-normal" id="uploadFile" type="button">选择文件</button>
                        </div> -->
                        <label class="layui-form-label">上传文件：</label>
                        <div class="layui-input-block">
                            <div style="display: inline-block">
                                <button class="layui-btn layui-btn-warm" id="uploadFile" type="button">点击选择
                                </button>
                            </div>
                            <!--<input type="text" name="fileName" placeholder="" class="layui-input"-->
                            <!--readonly="readonly"-->
                            <!--style="display: inline-block;width: 180px;margin-left: 20px;border: none !important">-->
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs12" id="fileNameArea" style="display: none">
                    <div class="layui-form-item">
                        <label class="layui-form-label">文件名称：</label>
                        <div class="layui-input-block">
                            <input type="text" name="fileName" placeholder="请输入文件名称" class="layui-input"
                                   style="width: 60%;display: inline-block">
                            <input type="text" name="fileType" class="layui-input" readonly="readonly"
                                   style="display: inline-block;width: 30%">
                        </div>
                    </div>
                </div>

                <div class="layui-col-xs12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">备注：</label>
                        <div class="layui-input-block">
                            <textarea name="maRemarks" placeholder="请输入" class="layui-textarea hyinput"></textarea>
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs12">
                    <!-- <div class="layui-form-item layui-upload ">
                        <button type="button" class="layui-btn layui-btn-normal" id="fileUpload"><i class="layui-icon"></i>上传文件</button> -->
                   <div style="text-align: center">
                       <button type="button" class="layui-btn" id="fileUpload"><i class="fa fa-check-circle"></i>确定</button>
                       <button type="button" class="layui-btn layui-btn-primary btnClose"><i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>关闭</button>
                   </div>
                </div>
            </div>
        </form>
    </div>
</script>
<!-- 议题附件-添加 -->
<script type="text/html" class="subject-add hide" id="subject-add">
    <div class="layui-card-body">
        <form class="layui-form form-theme3" name="subject-add">
            <div class="layui-row layui-col-space15">
                <!--<div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">资料类型</label>
                        <div class="layui-input-block">
                            <select name="fiFileType" id="subjectFileType">
                                <option value="">请选择</option>
                            </select>
                        </div>
                    </div>
                </div>-->
                <div class="layui-col-md2">
                    <div class="layui-form-item">
                        <div class="layui-upload">
                            <button class="layui-btn layui-btn-normal" id="uploadSubjectFile" type="button">选择文件</button>
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs12" id="fileNameArea" style="display: none">
                    <div class="layui-form-item">
                        <label class="layui-form-label">文件名称：</label>
                        <div class="layui-input-block">
                            <input type="text" name="fileName" placeholder="请输入文件名称" class="layui-input"
                                   style="width: 60%;display: inline-block">
                            <input type="text" name="fileType" class="layui-input" readonly="readonly"
                                   style="display: inline-block;width: 30%">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-layer-btn layui-layer-btn-c">
                        <button type="button" class="layui-btn" id="fileSubjectUpload"><i class="fa fa-check-circle"></i>确定</button>
                        <button type="button" class="layui-btn layui-btn-primary btnClose"><i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>关闭</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</script>
<!--待上会议题清单-->
<script type="text/html" class="dshyt hide">
    <div class="layui-card white-bg">
        <div class="layui-card-header layui-card-header-custom"><span><i></i>议案列表</span></div>
        <div class="layui-card-body">
            <!--layui-form-pane-->
            <form action="" class="layui-form layui-form-pane">
                <div class="layui-row layui-col-space10">
                    <div class="layui-col-md4">
                        <div class="layui-form-item">
                            <label class="layui-form-label">议案名称</label>
                            <div class="layui-input-block">
                                <input type="text" name="motionName" placeholder="请输入" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md4">
                        <div class="layui-form-item">
                            <label class="layui-form-label">提出部门</label>
                            <div class="layui-input-block">
                                <input type="text" name="soName"  placeholder="请选择" readonly="" autocomplete="off" class="layui-input">
                                <div class="eleTree ele5" lay-filter="data5"></div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md4">
                        <div class="layui-form-item">
                            <label class="layui-form-label">提出时间</label>
                            <div class="layui-input-block">
                                <input type="text" class="layui-input" readonly name="motionCreateTime" id="motionCreateTime" placeholder="请选择时间范围">
                            </div>
                        </div>
                    </div>
                    <input type="hidden" name="motionCreateTimeStar" id="motionCreateTimeStar">
                    <input type="hidden" name="motionCreateTimeEnd" id="motionCreateTimeEnd">

                </div>
                <div class="layui-row layui-col-space10">
                    <div class="" style="text-align: center; margin-bottom: 5px;right: 0;bottom: 8px;">
                        <div class="layui-input-inline" style="padding-left: 20px">
                            <button name="searchSubmit" class="layui-btn  " lay-submit="" lay-filter="dshytSearch" ><i class="fa fa-search"></i>查询</button>
                            <button name="reset" lay-filter="reset" type="reset" class="layui-btn layui-btn-primary  "><i class="fa fa-eraser"></i>重置</button>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
    <div class="layui-card-body">
        <table id="dshyt" lay-filter="dshyt"></table>
    </div>
</script>
<!--待上议题-添加-->
<!-- <div class="dshyt-add hide">
        <div class="layui-card-body">
            <form class="layui-form form-theme3" name="dshyt-add">
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md12">
                            <div class="layui-form-item">
                                <label class="layui-form-label">议题名称</label>
                                <div class="layui-input-block">
                                    <input type="text" name="ytmc" placeholder="请输入" autocomplete="off" class="layui-input hyinput">
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md12">
                            <div class="layui-form-item">
                                <label class="layui-form-label">提出部门</label>
                                <div class="layui-input-block">
                                    <select name="tcbm">
                                        <option value="">请选择</option>
                                        <option value="0">投资管理部</option>
                                        <option value="1">财务部</option>
                                        <option value="2">党群工作部</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md12">
                            <div class="layui-form-item">
                                <label class="layui-form-label">备注</label>
                                <div class="layui-input-block">
                                    <textarea name="ggmemo" placeholder="请输入" class="layui-textarea hyinput"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
            </form>
        </div>
</div> -->
<!--表决清单-编辑-->
<script type="text/html" class="bjqk-edit hide">
    <div class="layui-card-body">
        <form class="layui-form  form-theme3" name="dshyt-add" id="bjqkForm">
            <div class="layui-row layui-col-space15">
                <input type="hidden" id="deliberationId" name="deliberationId" class="layui-input hyinput">
                <input type="hidden" id="subjectId" name="subjectId" class="layui-input hyinput">
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">人员姓名</label>
                        <div class="layui-input-block">
                            <input type="text" id="deliberationPersonnel" lay-verify="deliberationPersonnel" name="deliberationPersonnel" readonly="readonly" autocomplete="off" class="layui-input hyinput">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">职务名称</label>
                        <div class="layui-input-block">
                            <input type="text" id="job" name="job" autocomplete="off" class="layui-input hyinput" readonly="readonly">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">参会状态</label>
                        <div class="layui-input-block">
							<input type="text" id="attendStatusName" name="attendStatusName"  autocomplete="off" class="layui-input hyinput" readonly="readonly">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">缺席原因</label>
                        <div class="layui-input-block">
                            <textarea id="reason" name="reason" class="layui-textarea hyinput" readonly="readonly"></textarea>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>审议结果</label>
                        <div class="layui-input-block">
                            <select id="deliberationResult" name="deliberationResult" lay-verify="deliberationResult">
                            </select>
                        </div>
                    </div>
                </div>
				<div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">委托人名</label>
                        <div class="layui-input-block">
							<input type="text" id="assignor" name="assignor"  autocomplete="off" class="layui-input hyinput" readonly="readonly">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-form-item">
                        <label class="layui-form-label">备注信息</label>
                        <div class="layui-input-block">
                            <textarea id="remark" name="remark"  class="layui-textarea hyinput" readonly="readonly"></textarea>
                        </div>
                    </div>
                </div>
                <div style="display: none">
                    <div class="layui-card" style="margin-top: 10px">
                        <div class="layui-card-body">
                            <div class="layui-form-item" style="text-align: center;">
                                <button class="layui-btn" lay-submit lay-filter="deliberationAdd"> <i class="layui-icon">&#x1005;</i>保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</script>

<!--会议类型选择-->
<div class="meetingTypeSelectLayer hide">
    <div class="moduleBox">
        <form class="layui-form form-theme3" name="preMeetingTypeFormLayer" lay-filter="preMeetingTypeForm">
            <div class="layui-card">
                <div class="layui-card-body">
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md12">
                            <div class="layui-form-item">
                                <label class="layui-form-label"><b class="red">*</b>会议类型:</label>
                                <div class="layui-input-block">
                                    <select name="meetingType" lay-verify="required" id="meetingType"
                                        lay-filter="meetingTypeFilter"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--<div style="display: none">-->
            <!--<div class="layui-card" style="margin-top: 10px">-->
            <!--<div class="layui-card-body">-->
            <!--<div class="layui-form-item" style="text-align: center;">-->
            <!--<button class="layui-btn"  lay-filter="preFormMeetingTypeAdd"> <i class="layui-icon">&#x1005;</i>保存</button>-->
            <!--</div>-->
            <!--</div>-->
            <!--</div>-->
            <!--</div>-->
        </form>
    </div>
</div>

<!--编辑出席人员 layer-->
<div class="attendee-edit-layer hide">
    <div class="moduleBox">
        <table class="layui-hide" id="attendee-edit-table" lay-filter="attendee-edit-table"></table>
        <script type="text/html" id="attendee-edit-table-tool-bar">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-sm" lay-event="add">
                    <i class="layui-icon">&#xe608;</i> 新增
                </button>
                <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete" >
                    <i class="layui-icon">&#xe640;</i> 删除
                </button>
                <button class="layui-btn layui-btn-sm layui-btn-primary" lay-event="delete">
                    <i class="fa fa-share-alt"></i> 选择
                </button>
            </div>
        </script>
        <script type="text/html" id="attendee-edit-table-oper">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-xs" lay-event="edit">编辑</button>
            </div>
        </script>
    </div>
</div>
<!--编辑出席人员情况 layer-->
<div class="attendeeStatusLayer hide">
    <div class="moduleBox">
        <form class="layui-form form-theme3" lay-filter="attendeeForm">
            <input type="hidden" name="attendeeId">
            <div class="layui-form-item">
                <label class="layui-form-label "><b class="red">*</b>人员姓名:</label>
                <div class="layui-input-block">
                    <input type="text" class="layui-input" name="attendeeName" lay-verify="required"
                        placeholder="请输入人员姓名">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label "><b class="red">*</b>职务名称:</label>
                <div class="layui-input-block">
                    <input type="text" class="layui-input" name="attendeeJob" lay-verify="required"
                        placeholder="请输入职务名称">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label "><b class="red">*</b>出席排序:</label>
                <div class="layui-input-block">
                    <input type="text" class="layui-input" name="ggSort" lay-verify="required">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label "><b class="red">*</b>参会状态:</label>
                <div class="layui-input-block">
                    <select name="participantsType" lay-filter="participantsType">
                        <option name="" value=""></option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item zhuchiArea" style="display: none">
                <label class="layui-form-label "><b class="red">*</b>召集主持:</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="isConvenor" title="召集人" checked>
                    <input type="checkbox" name="isModerator" title="主持人">
                </div>
            </div>
            <div class="layui-form-item quexiArea" style="display: none">
                <label class="layui-form-label "><b class="red">*</b>缺席原因:</label>
                <div class="layui-input-block">
                    <select name="reason">
                        <option value="">请输入缺席原因或选择常见缺席原因</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item weituoArea" style="display: none">
                <label class="layui-form-label "><b class="red">*</b>委托人名:</label>
                <div class="layui-input-block">
                    <input type="text" class="layui-input" name="assignor" lay-verify="required" placeholder="请输入委托人名">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label ">备注:</label>
                <div class="layui-input-block">
                    <textarea name="remark" class="layui-textarea" placeholder="请输入备注信息"></textarea>
                </div>
            </div>
        </form>
    </div>
</div>

<body class="iframe-h">

    <div class="content-wrap">
        <div class="layui-row layui-col-space10">
            <div class="layui-col-xs12">
                <div class="gloBg">
                    <div class="mainTitle" id="mainTitle">会议</div>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
                <!-- 基本信息 -->
                <form style="margin-top: 0" class="layui-form form-theme3" name="meetingLayer" lay-filter="meetingForm">
                    <div class="layui-card">
                        <div class="layui-card-header layui-card-header-custom">
                            <span><i></i>会议信息
                                <b class="zsBga"></b>
                            </span>
                        </div>
                        <input type="hidden" name="curSeId" id="curSeId">
                        <input type="hidden" name="meetingId" id="meetingId">
                        <input type="hidden" name="formOperType" id="formOperType">
                        <input type="hidden" name="releaseTime" id="releaseTime">
                        <div class="layui-card-body">
                            <div class="layui-row layui-col-space15">
                                <div class="layui-col-md12">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label"><b class="red">*</b>会议名称:</label>
                                        <div class="layui-input-block">
                                            <input type="text" lay-verify="meetingName" name="meetingName"
                                                id="meetingName" placeholder="请输入" autocomplete="off"
                                                class="layui-input hyinput" value="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-row layui-col-space15">
                                <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label"><b class="red">*</b>会议日期:</label>
                                        <div class="layui-input-block">
                                            <input type="text" readonly lay-verify="meetingTime"
                                                class="layui-input hyinput" id="meetingTime" name="meetingTime"
                                                placeholder="请选择日期">
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label"><b class="red hide">*</b>会议地点:</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="meetingAddr"
                                                id="meetingAddr" placeholder="请输入" autocomplete="off"
                                                class="layui-input hyinput" value="">
                                        </div>
                                    </div>
                                </div>
                                <!--  <div class="layui-col-md6">
                                 <div class="layui-form-item">
                                     <label class="layui-form-label"><b class="red">*</b>会议类型:</label>
                                     <div class="layui-input-block">
                                         <select name="meetingType" lay-verify="required" id="meetingType" lay-filter="meetingTypeFilter">
                                             <option name="" value=""></option>
                                         </select>
                                     </div>
                                 </div>
                             </div> -->
                                <input type="hidden" name="meetingTypeId" id="meetingTypeId">
                                <input type="hidden" name="meetingTypeCode" id="meetingTypeCode">
                                <input type="hidden" name="meetingTypeName" id="meetingTypeName">
                            </div>
                            <div class="layui-row layui-col-space15">
                                <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label"><b class="red">*</b>会议形式:</label>
                                        <div class="layui-input-block">
                                            <input type="text" readonly="readonly" name="meetingModeName"
                                                id="meetingModeName" class="layui-input hyinput" />
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label"><b class="red">*</b>审议形式:</label>
                                        <div class="layui-input-block">
                                            <input type="text" readonly="readonly" name="deliberationName"
                                                id="deliberationName" class="layui-input hyinput" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="layui-row layui-col-space15">
                            <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label"><b class="red">*</b>纪要印发时间:</label>
                                        <div class="layui-input-block">
                                            <input type="text" lay-verify="required" readonly class="layui-input hyinput" id="releaseTime" name="releaseTime" placeholder="请选择日期">
                                        </div>
                                    </div>
                            </div>
                        </div> -->
                        </div>
                    </div>
                    <input type="hidden" readonly name="seComcode" id="seComcode" placeholder="请输入" autocomplete="off"
                        class="layui-input hyinput" value="">
                    <input type="hidden" readonly name="meetingCode" id="meetingCode" placeholder="请输入"
                        autocomplete="off" class="layui-input hyinput" value="">
                    <input type="hidden" readonly id="meetingYear" class="layui-input hyinput" name="meetingYear"
                        id="meetingYear" placeholder="请输入年份">
                    <input type="hidden" id="serialNumber" readonly name="serialNumber" placeholder="请输入"
                        autocomplete="off" class="layui-input hyinput" value="">

                    <div style="display: none">
                        <div class="layui-card" style="margin-top: 10px">
                            <div class="layui-card-body">
                                <div class="layui-form-item" style="text-align: center;">
                                    <button class="layui-btn" lay-submit lay-filter="formMeetingAdd"> <i class="layui-icon">&#x1005;</i>保存</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-collapse white-bg editView" style="margin-top: 10px">
                        <div class="layui-colla-item">
                            <h2 class="layui-colla-title white-bg">参会情况 <b class="zsBga"></b></h2>
                            <div class="layui-colla-content layui-show">
                                <!-- 参会人员 -->
                                <div class="layui-card">

                                    <div class="layui-card-body">
                                        <div class="layui-row layui-col-space10">
                                            <div class="layui-col-md6">
                                                <div class="layui-form-item" style="position: relative">
                                                    <label class="layui-form-label"><b class="red">*</b>召集人员:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="convenor" lay-verify="convenor"
                                                            id="convenor" placeholder="请输入召集人员姓名" autocomplete="off"
                                                            class="layui-input hyinput" value="" readonly="readonly">
                                                    </div>
                                                    <!-- <div style="position: absolute;z-index: 1;top: 1px;right: 0">
                                                    <button class="layui-btn layui-btn-warm hidee" id="attend-edit"><i class="fa fa-pencil"></i>编辑</button>
                                                    <button class="layui-btn hidee" id="attend-setting"><i class=" fa fa-share-alt"></i>选择</button>
                                                </div> -->
                                                </div>
                                            </div>
                                            <div class="layui-col-md6">
                                                <div class="layui-form-item" style="position: relative">
                                                    <label class="layui-form-label"><b class="red">*</b>主持人员:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="moderatorName"
                                                            lay-verify="moderatorName" id="moderatorName"
                                                            placeholder="请输入主持人员姓名" autocomplete="off"
                                                            class="layui-input hyinput" value="" readonly="readonly">
                                                    </div>
                                                    <!-- <div style="position: absolute;top: 1px; right: 0">
                                                    <button class="layui-btn layui-btn-warm hidee" id="zhuchi-edit"><i class="fa fa-pencil"></i>编辑</button>
                                                    <button class="layui-btn hidee" id="zhuchi-setting"><i class=" fa fa-share-alt"></i>选择</button>
                                                </div> -->
                                                </div>
                                            </div>
                                            <div class="layui-col-md12">
                                                <div class="layui-form-item" style="position: relative">
                                                    <label class="layui-form-label"><b class="red">*</b>出席人员:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" lay-verify="attendeeNames"
                                                            name="attendeeNames" id="attendeeNames"
                                                            placeholder="请点击选择按钮添加出席人员" autocomplete="off"
                                                            class="layui-input hyinput" value="" readonly="readonly">
                                                    </div>
                                                    <!-- <div style="position: absolute;top: 1px; right: 0">
                                                    <button class="layui-btn layui-btn-warm hidee" id="attendee-edit"><i class="fa fa-pencil"></i>编辑</button>
                                                    <button class="layui-btn hidee" id="attendee-setting"><i class=" fa fa-share-alt"></i>选择</button>
                                                </div> -->
                                                </div>
                                            </div>
                                            <div class="layui-col-md12" id="stockholderDiv" style="display:none">
                                                <div class="layui-form-item" style="position: relative">
                                                    <label class="layui-form-label"><b class="red">*</b>出席股东:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" lay-verify="stockName"
                                                            name="stockName" id="stockName"
                                                            placeholder="默认从企业完善信息中获取持股前10名股东名称，可点击编辑按钮加入企业完善模块中无维护股东信息，也可点击选择按钮重新选择加入需要展示的股东。" autocomplete="off"
                                                            class="layui-input hyinput" value="" readonly="readonly">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="layui-col-md12">
                                                <div class="layui-form-item relative">
                                                    <label class="layui-form-label">缺席人员:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" readonly name="absentNames" id="absentNames"
                                                            placeholder="从已选出席人员中筛选制度人员，且为全会缺席情况" autocomplete="off"
                                                            class="layui-input padRt64 hyinput" value="">
                                                    </div>
                                                    <!--<div style="position: absolute;right: 0;top: 1px;">-->
                                                    <!--<button class="layui-btn " id="absent-setting">选择</button>-->
                                                    <!--</div>-->
                                                </div>
                                            </div>
                                            <div class="layui-col-md12">
                                                <div class="layui-form-item relative">
                                                    <label class="layui-form-label">常设列席:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" readonly name="attenders" id="attenders"
                                                            placeholder="由已选择出席人自动带出常设列席人员，并在此基础上增补删减"
                                                            autocomplete="off" class="layui-input hyinput" value="">
                                                    </div>
                                                    <!-- <div style="position: absolute;right: 0;top: 1px;">
                                                    <button class="layui-btn layui-btn-warm hidee" id="attender-setting"><i class="fa fa-pencil"></i>编辑</button>
                                                </div> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="layui-col-xs12">
                <div class="layui-collapse white-bg editView">
                    <div class="layui-colla-item">
                        <h2 class="layui-colla-title white-bg">会议资料 <b class="zsBga"></b></h2>
                        <div class="layui-colla-content">
                            <!-- 会议资料 -->
                            <div class="layui-card">
                                <!-- <div class="layui-card-header">
                                    <i class="iconfont icon-SZYD-xtsjzdgl"></i>
                                    <span class="hytitle">会议资料</span>
                                    <i class="layui-icon layui-icon-right"></i>
                                    <span class="zsBga">【由会议管理部门添加】</span>
                            </div> -->
                            <div style="width: 110px;">
                                <label class="layui-form-label" style="position:relative;right:-8px">最终版本:</label>
                            </div>
                                <div class="layui-card-body" style="padding-left: 137px;">
                                    <table id="meetingFile" lay-filter="meetingFile"></table>


                                    <script type="text/html" id="meetingFileOper">
                                    <a class="layui-btn layui-btn-xs layui-btn-warm" lay-event="check">预览</a>
                                    <a class="layui-btn layui-btn-xs" permission-btn="meetingMgrMeetingClLoad" lay-event="load">下载</a>
                                    <!-- <a class="layui-btn layui-btn-xs" permission-btn="meetingAttachmentUp" lay-event="up">上移</a>
                                    <a class="layui-btn layui-btn-xs" permission-btn="meetingAttachmentDown" lay-event="down">下移</a> -->

                                    <!-- <a class="layui-btn layui-btn-xs layui-btn-primary hidee"
                                       permission-btn="meetingAttachmentUp" lay-event="upFile"><i
                                            class="layui-icon">&#xe619;</i>上移</a>
                                    <a class="layui-btn layui-btn-xs layui-btn-primary hidee"
                                       permission-btn="meetingAttachmentDown" lay-event="downFile"><i
                                            class="layui-icon">&#xe61a;</i>下移</a> -->
                                    <!-- <a class="layui-btn layui-btn-xs edit1" lay-event="edit">编辑</a> -->
                                </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-xs12">
                <div class="layui-collapse white-bg editView">
                    <div class="layui-colla-item">
                        <h2 class="layui-colla-title white-bg">议题清单<b class="zsBga"></b></h2>
                        <div class="layui-colla-content">
                            <!-- 议题清单 -->
                            <div class="layui-card">
                                <div style="width: 110px;">
                                    <label class="layui-form-label" style="position:relative;right:-8px">上会议题:</label>
                                </div>
                                <div class="layui-card-body" style="padding-left: 137px;">
                                    <table id="ytList" lay-filter="ytList"></table>
                                    <!-- <script type="text/html" id="ytListToolBar">
                                    <div class="layui-btn-container">
                                        <button class="layui-btn layui-btn-sm hidee" permission-btn="" lay-event="add">
                                            <i class="layui-icon">&#xe608;</i> 关联
                                        </button>
                                        <button class="layui-btn layui-btn-sm layui-btn-danger hidee" permission-btn="meetingMgrSubjectDel" lay-event="del">
                                            <i class="layui-icon">&#xe640;</i> 删除
                                        </button>
                                        <button class="layui-btn layui-btn-primary layui-btn-sm hidee" permission-btn="subject_up" lay-event="up">
                                            <i class="layui-icon">&#xe619;</i> 向上
                                        </button>
                                        <button class="layui-btn layui-btn-primary layui-btn-sm hidee" permission-btn="subject_down" lay-event="down">
                                            <i class="layui-icon">&#xe61a;</i> 向下
                                        </button>
                                    </div>
                                </script> -->

                                    <script type="text/html" id="ytListOper">
                                    <!--<a class="layui-btn layui-btn-xs edit2" permission-btn="meetingMgrSubjectEdit" lay-event="edit">编辑</a>-->
                                    <!--  <a class="layui-btn layui-btn-xs edit2" lay-event="check">查看议题</a>         -->

                                    <a class="layui-btn layui-btn-xs " permission-btn="meetingMgrSubjectEdit"
                                        lay-event="viewCheckDetail">审议详情</a>
                                    <a class="layui-btn layui-btn-xs layui-btn-warm" lay-event="check">议案详情</a>
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <div style="position: fixed;width: 100%;bottom: 12px;">
        <div class="layui-card" style="margin-top: 10px">
            <div class="layui-card-body" style="border-top: 1px solid #dfdfdf">
                <div class="layui-form-item" style="text-align: center;">
                    <button class="layui-btn" id="formMeetingClose"><i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>关闭</button>
                </div>
            </div>
        </div>
    </div> -->
    <!--脚垫-->
    <div style="height: 80px;"> </div>
    <script src="./../../../../src/js/layui/layui.js"></script>
    <script>

        layui.config({
            base: '../../../src/js/',
            version: new Date().getTime()
        }).use(['eleTree', 'layer', 'table', 'form', 'laytpl', 'common', 'element', 'laydate', 'upload'], function () {
            var table = layui.table;
            var form = layui.form;
            var tree = layui.eleTree;
            var common = layui.common;
            var element = layui.element;
            var laydate = layui.laydate;
            var upload = layui.upload;
            var util = layui.util;
            element.init();
            var baseUrl = '../../../../';
            var fileSortData;
            common.themeSet();

            var mainFunc = {
                meetingTypeSelectLayer: function () {
                    var meetingTypeSelectLayer = layer.open({
                        title: '会议类型',
                        area: ['400px', '500px'],
                        btn: ['<i class="fa fa-check-circle"></i>确定'],
                        content: $('.meetingTypeSelectLayer').html(),
                        type: '1',
                        closeBtn: 0,
                        btnAlign: 'c',
                        success: function (obj) {
                            var parent = $(obj.selector);
                            common.selectDataSet({
                                elem: parent.find('[name=meetingType]'),
                                url: 'meetingmgr/tiolMeetingType/getTiolMeetingTypeSelect',
                                responseList: 'list',
                                method: 'get',//默认为get
                                optionText: 'meetingTypeName',
                                optionValue: 'meetingType',
                                success: function (data) {
                                    form.render('select');
                                }
                            });
                        },
                        yes: function (index, layero) {
                            var parent = $(layero.selector);
                            if (!parent.find('[name=meetingType]').val()) {
                                layer.msg('请选择会议类型');
                                return false;
                            }
                            var select = parent.find('[name=meetingType]');
                            var meetingTypeValue = select.val();//值
                            meetingTypeName = parent.find('[name=meetingType]').find('option:checked').text();//现实的内容
                            meetingTypeId = meetingTypeValue.split("_")[0];
                            meetingTypeCode = meetingTypeValue.split("_")[1];

                            $("#meetingTypeId").val(meetingTypeId);
                            $("#meetingTypeCode").val(meetingTypeCode);
                            $("#meetingTypeName").val(meetingTypeName);
                            $("#meetingId").val(meetingIdForm);
                            $("#formOperType").val(formOperType);
                            $('#mainTitle').text(meetingTypeName + '会议').show();

                            layer.close(meetingTypeSelectLayer);
                        }
                    });
                }
            };

            //页面刚进来，需要先选择会议类型，获取对应会议类型ID Code Name
            var meetingTypeId,
                meetingTypeCode,
                meetingTypeName,
                flowStatusId,
                meetingIdForm = common.getQueryVariable('dataObj') || common.uuid('', 32);
            //操作类型，add:新增；edit：编辑
            var formOperType = common.getQueryVariable('formOperType');
            var flowStatusId = common.getQueryVariable('flowStatusId');
            if (common.getQueryVariable('meetingId')) {
                meetingTypeId = common.getQueryVariable('meetingTypeId');
                meetingTypeCode = common.getQueryVariable('meetingTypeCode');
                meetingTypeName = common.getQueryVariable('meetingTypeName');
                meetingIdForm = common.getQueryVariable('meetingId') || common.uuid('', 32);
                $("#meetingTypeId").val(meetingTypeId);
                $("#meetingTypeCode").val(meetingTypeCode);
                $("#meetingTypeName").val(meetingTypeName);
                $("#meetingId").val(meetingIdForm);
                $("#formOperType").val(formOperType);
                $('#mainTitle').text(meetingTypeName + '会议').show();

                //隐藏新建按钮
                $('#addNewMeeting').hide();
                if('GD'==meetingTypeCode){
					$('#stockholderDiv').show();
				}else{
					$('#stockholderDiv').hide();
				}

            } else {
                //会议类型选择
                mainFunc.meetingTypeSelectLayer();
            }

            var reasonMap = {};
            var reasonList = [];
            var approvalFlagMap = {};
            var approvalFlagList = [];
            var passFlagMap = {};
            var attendStatusMap = {};
            var attendStatusList = [];
            var deliberationResultMap = {};
            var deliberationResultList = [];
            var meetingFileTypeMap = {};
            var meetingFileTypeList = [];
            var participantsTypeMap = {};
            var participantsTypeList = [];
            //表决弹窗
            var bj_index_edit;
            //议题弹窗
            var yt_index_edit;
            var formMeetingCloseIndex = window.parent.layer.index;
            // --------------------------------下拉框-----------------------------------
            //会议类型获取URL
            var meetingTypeUrl = baseUrl + "meetingmgr/tiolMeetingType/getTiolMeetingTypeSelect";
            //审议形式获取URL
            var deliberationModeUrl = baseUrl + "meetingmgr/tiolMeetingFormAlias/getTiolMeetingFormList";
            //字典获取URL
            var dictUrl = baseUrl + "sysmgr/dicts/selectDictListByPcode";
            //人员选择
            var memberChooseUrl = baseUrl + "meetingmgr/tiolCompanyGroup/pageQueryEnableTiolMeetingMemberGroup"
            //保存人员URL
            var saveMemberInfoUrl = baseUrl + "meetingmgr/tiolMeeting/saveMemberInfo"
            //保存出席人员信息
            var saveAttendInfoUrl = baseUrl + "meetingmgr/tiolAttendee/saveTiolAttendeeInfo"
            var keyValueTypeMap = {
                "meetingType": {
                    "url": meetingTypeUrl,
                    "key": "meetingType",
                    "value": "meetingTypeName"
                },
                "deliberationMode": {
                    "url": deliberationModeUrl,
                    "key": "meetingFormId",
                    "value": "meetingFormName"
                },
                "dict": {
                    "url": dictUrl,
                    "key": "sdCode",
                    "value": "sdName"
                }
            };

            var selectDictMap = {
                "deliberationResult": {
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "DELIBERATIONRESULT"
                    }
                },
                /*  "attendStatus":{
                     "kvType": keyValueTypeMap.dict,
                     "param": {
                         "dictPCode": "attendStatus"
                     }
                 }, */
                // "reason":{
                //     "kvType": keyValueTypeMap.dict,
                //     "param": {
                //         "dictPCode": "reason"
                //     }
                // },
                "meetingType": {
                    "kvType": keyValueTypeMap.meetingType
                },
                "exigence": {
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "msRank"
                    }
                },
                /* "subjectType":{
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "subjectType"
                    }
                }, */
                "resultType": {
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "resultType"
                    }
                },
                "position": {
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "POSITION_TYPE"
                    }
                },
                "meetingFileType": {
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "materialType"
                    }
                },
                "subjectFileType": {
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "subjectMaterialType"
                    }
                },
                "participantsType": {
                    "kvType": keyValueTypeMap.dict,
                    "param": {
                        "dictPCode": "attendStatus"
                    }
                },
            }
            form.on('select(approvalFlagFilter)', function (data) {
                $("[name='approvalFlagName']").val($(data.elem).find("[value='" + data.value + "']").text());
            });
            form.on('select(positionFilter)', function (data) {
                $("[name='positionName']").val($(data.elem).find("[value='" + data.value + "']").text());
            });

            common.selectDataSet({
                elem: $('[name=passFlag]'),
                url: 'sysmgr/dicts/selectDictListByPcode?dictPCode=PASSFLAG',
                responseList: 'list',
                method: 'get',//默认为get
                optionText: 'sdName',
                optionValue: 'sdCode',
                success: function (data) {
                    if (data && data.list && data.list.length > 0) {
                        $.map(data.list, function (item) {
                            passFlagMap[item.sdCode] = item;
                        });
                    }
                    form.render('select');
                }
            });

            // --------------------------------下拉框END--------------------------------
            // --------------------------------初始化--------------------------------

            common.fetchGet('sysmgr/dicts/selectDictListByPcode?dictPCode=materialType', function (data) {
                if (data && data.list && data.list.length > 0) {
                    meetingFileTypeList = data.list;
                    $.map(data.list, function (item) {
                        meetingFileTypeMap[item.sdCode] = item;
                    });
                }
            });
            var eventHandle = {
                initDict: function (array, parent, where, json, callback) {
                    $.map(array, function (value) {
                        var dictId = value;
                        var dictConfigInfo = selectDictMap[dictId];
                        if (!dictConfigInfo) return false;
                        var queryParam = '?';
                        $.map(dictConfigInfo.param, function (value, key) {
                            queryParam += key + '=' + value + '&';
                        });
                        if (where && dictConfigInfo.where) {
                            queryParam += "&where=" + where;
                        }
                        var option = {
                            elem: $('#' + dictId),
                            url: dictConfigInfo.kvType.url + queryParam,
                            method: 'get',
                            responseList: 'list',
                            optionText: dictConfigInfo.kvType.value,
                            optionValue: dictConfigInfo.kvType.key,
                            success: function (obj) {
                                form.render("select");
                                if (typeof (callback) == "function") {
                                    callback();
                                }
                            }
                        }
                        if (json) {
                            var selectData = [];
                            $.each(json, function (i) {
                                $.map(json[i], function (value, key) {
                                    var data = {};
                                    data[dictConfigInfo.kvType.key] = key;
                                    data[dictConfigInfo.kvType.value] = value;
                                    selectData.push(data);
                                })
                            })
                            option.loadData = selectData;
                            option.loadSuccess = function (obj) {

                                if (obj && obj.length == 1) {
                                    this.elem.val(obj[0][this.optionValue]);
                                    form.render();
                                }
                            }
                        }
                        common.selectDataSet(option);
                    });
                },
                shqkInit: function (subjectId) {
                    common.fetchPost('meetingmgr/tiolDeliberation/selectTiolDeliberationTj?subjectId=' + subjectId, null, function (res) {
                        $('input[name=bjqk]').val(res.object);
                        form.render();
                    }, function () { });
                },
                subjectPageInit: function (meetingId) {
                    //if(meetingId!=null&&meetingId!=undefined&&meetingId!=''){
                    table.render(common.tableInitParams({//议题清单
                        elem: '#ytList',
                        url: baseUrl+'meetingmgr/tiolSubject/selectTiolSubjectPageByMeetingId',
                        where: { "meetingId": meetingId },
                        id: 'subjectTableReload',
                        method: 'post',
                        // toolbar:'#ytListToolBar',
                        defaultToolbar: [],
                        height: 'full-200',
                        height:false,
                        cols: [
                            [
                                { type: 'numbers', title: '序号' },
                                // {field: 'motionName', title: '议案名称'},
                                { field: 'subjectName', title: '议题名称', minWidth: 200 },
                                { field: 'soName', title: '提出部门', minWidth: 120 },
                                { field: 'motionCreateTime', title: '提交日期', width: 120 },
                                {
                                    field: 'passFlag', title: '审议情况', width: 90,
                                    templet: function (rowData) {
                                        if (rowData['passFlag'] && passFlagMap[rowData['passFlag']]) {
                                            if(rowData['passFlag'] == 1){
                                                return '<span class="green">'+passFlagMap[rowData['passFlag']]['sdName'] +'</span>'
                                            }else if(rowData['passFlag'] == 0){
                                                return '<span class="red">'+passFlagMap[rowData['passFlag']]['sdName'] +'</span>'
                                            }else{
                                                return '<span class="green3">'+passFlagMap[rowData['passFlag']]['sdName'] +'</span>'
                                            }
                                        } else {
                                            return ''
                                        }
                                    }
                                }, { field: '', title: '操作', width: 175, toolbar: '#ytListOper', fixed: 'right' }
                            ]
                        ]
                    }));
                    table.render(common.tableInitParams({//会议资料
                        elem: '#meetingFile',
                        id: 'meetingFileTableReload',
                        url: baseUrl + 'dfsmgr/file/getFileByResId?id=' + meetingId,
                        // data:meetingFile,
                        method: 'post',
                        // toolbar:'#meetingFileToolBar',
                        defaultToolbar: [],
                        height: 'full-200',
                        height:false,
                        cols: [
                            [
                                { type: 'numbers', title: '序号' },
                                {
                                    field: 'fiFileType', title: '资料类型', width: 120, templet: function (rowData) {
                                        if (meetingFileTypeMap[rowData['fiFileType']] != null && meetingFileTypeMap[rowData['fiFileType']] != undefined) {
                                            return meetingFileTypeMap[rowData['fiFileType']]['sdName'];
                                        } else {
                                            return '其他';
                                        }
                                    }
                                },
                                {
                                    field: 'fiName',
                                    title: '文件名称',
                                    minWidth: 150,
                                    templet: function (rowData) {
                                        return rowData.fiName + '.' + rowData.fiSuffix;
                                    }
                                },
                                { field: '', title: '操作', toolbar: '#meetingFileOper', fixed: 'right', width: 150, align: "center" },
                            ]
                        ],
                        done: function (data) {
                            //文件排序，并且数据保存到全局
                            fileSortData = common.arraySort(data.data ? data.data : [], 'ggSort');
                            // common.buttonLimit();
                        }
                    }));
                    // }
                }
            };
            // 日期时间选择器
            /**laydate.render({
                elem: '#meetingTime',
                type: 'date',
                range: true,
                trigger: 'click',
                change: function(value, date, endDate){
                    $('#meetingYear')[0].value = value.split("-")[0];
                    createMeetingCode();
                }
            });**/

            eventHandle.initDict(['meetingType', 'position']);
            // ============================查看模式======================
            common.fetchPost('meetingmgr/tiolMeeting/selectTiolMeetingById', { meetingId: meetingIdForm }, function (data) {
                if (data.success) {
                    initFormValue(data);
                    form.render();
                } else {
                    layer.msg("查询会议信息失败:" + data.resultMessage);
                }
            }, function () {
                layer.msg('查询会议信息失败');//失败后提示
            });
            $('input').attr('disabled', true)
            $('input').attr('readonly', "readonly")
            $('select').attr('disabled', true)



            // ===========================查看模式END===============================


            eventHandle.subjectPageInit(meetingIdForm);
            var userInfo = JSON.parse(common.getCookie('userInfo'));
            var curSeId, seComeCode;
            if (userInfo) {
                curSeId = userInfo.currEnterpriseVo.seId;
                seComeCode = userInfo.currEnterpriseVo.seComcode;
            }

            $("#seComcode").val(seComeCode);
            $("#curSeId").val(curSeId);
            $('#formMeetingClose').unbind('click').bind('click', function (e) {
                window.parent.layer.close(formMeetingCloseIndex);
                return false;
            });
            //保存
            $('#saveMeetingAll').unbind('click').bind('click', function (e) {



                layer.confirm('确定保存会议？', function (index) {
                    //todo: 提交事件 待补充
                    $("[lay-filter='formMeetingAdd']").click();

                    layer.close(index);
                });

                return false;
            });
            //新建
            $('#addNewMeeting').off().on('click', function () {
                layer.confirm('将重置表单，确认新建？', function () {
                    // mainFunc.meetingTypeSelectLayer();
                    //触发会议保存事件
                    $("[lay-filter='formMeetingAdd']").click();

                    //重载新增页面
                    window.location.reload();
                });
            });
            //提交
            $('#submitMeeting').off().on('click', function () {
                layer.confirm('确定提交会议？', function (index) {
                    //todo: 提交事件 待补充
                    var layerLoader = common.layerLoader();
                    common.fetchPost('meetingmgr/tiolMeeting/commitMeeting', { "meetingId": meetingIdForm, "flowStatusId": flowStatusId }, function (res) {
                        layer.close(layerLoader);
                        if (res == null || res.resultCode == '-1') {
                            layer.alert(res.resultMessage, {
                                btn: ['<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>关闭'],
                                btnAlign: 'c',
                                time: 20000
                            });
                        } else {
                            layer.msg('提交成功');
                            //如果是新建入口 则不关闭，编辑入口就关闭
                            setTimeout(function () {
                                if (meetingIdForm && formOperType == "edit") {
                                    parent.$('.newIframeFixedDom', parent.document).prev().prev().click();
                                }
                            }, 500);

                        }
                    }, function () {
                        layer.close(layerLoader);
                    });
                    layer.close(index);
                });
            });
            function loadFormValue(data) {
                data.object.meetingType = data.object.meetingTypeId + "_" + data.object.meetingTypeCode;
                data.object.meetingTime = data.object.meetingTime + " - " + data.object.meetingTimeEnd;
                data.object.formOperType = 'edit';
                formOperType = 'edit';
                form.val("meetingForm", data.object);
                meetingIdForm = data.object.meetingId;
                meetingTypeId = data.object.meetingTypeId
                meetingTypeCode = data.object.meetingTypeCode
                meetingTypeName = data.object.meetingTypeName
            }
            function initFormValue(data) {
                data.object.meetingTime = data.object.meetingTime + " - " + data.object.meetingTimeEnd;
                form.val("meetingForm", data.object);
            }
            // --------------------------------初始化END--------------------------------

            function createMeetingCode() {
                getMeetingSerialNumber();
                var serialNumber = $('#serialNumber').val()
                $('#meetingCode').val($('#seComcode').val() + "-" + $('#meetingTypeCode').val() + $('#meetingYear').val() + $('#serialNumber').val());
            }

            function getMeetingSerialNumber() {
                var userInfo = JSON.parse(common.getCookie('userInfo'));
                var seComeCode = userInfo.currEnterpriseVo.seComcode;
                if ($('#seComcode').val() == undefined || $('#seComcode').val() == '' || $('#seComcode').val() == null) {
                    $('#seComcode').val(seComeCode);
                }
                var meetingTypeCode = $('#meetingTypeCode').val();
                var meetingYear = $('#meetingYear').val();
                common.fetchPost('meetingmgr/tiolMeeting/findSerialNumberByMap',
                    {
                        meetingId: meetingIdForm,
                        seComcodeEq: seComeCode,
                        meetingTypeCode: meetingTypeCode,
                        meetingYear: meetingYear,
                        type: "meeting"
                    }
                    , function (data) {
                        if (data.success) {
                            $('#serialNumber').val(data.object);
                        } else {
                            layer.msg("获取流水号失败:" + data.resultMessage);
                        }
                    }, function () {
                        layer.msg('获取流水号失败');//失败后提示
                    }, false);
            }
            // --------------------------------保存表单--------------------------------
            form.on('submit(deliberationAdd)', function (obj) {
                var val = obj.field.deliberationPersonnel;
                if (val) {
                    obj.field.meetingId = $("#meetingId").val();
                    // obj.field.subjectId =$("#subjectId").val();
                    common.fetchPost('meetingmgr/tiolDeliberation/saveTiolDeliberationInfo', obj.field, function (data) {
                        if (data.success) {

                            layer.msg('保存审议结果成功');
                            eventHandle.shqkInit(obj.field.subjectId);
                            table.reload('bjTable', {
                                page: {}
                                , where: {
                                    subjectId: obj.field.subjectId
                                }
                            });
                            layer.close(bj_index_edit);
                        } else {
                            layer.msg("保存审议结果失败:" + data.resultMessage);
                        }
                    }, function () {
                        layer.msg('保存审议结果失败');//失败后提示
                    });
                }
                return false;
            });

            form.on('submit(formMeetingAdd)', function (obj) {
                var val = $("#meetingId").val();
                var meetingSaveLoader = common.layerLoader();
                common.fetchPost('meetingmgr/tiolMeeting/findMeetingByNameAndDateVail', obj.field, function (data) {
                    if (data.object == "false") {
                        if (formOperType == "edit") {//编辑时的保存
                            common.fetchPost('meetingmgr/tiolMeeting/saveTiolMeetingInfo', obj.field, function (data) {
                                layer.close(meetingSaveLoader);
                                if (data.success) {
                                    loadFormValue(data);
                                    layer.alert('更新会议信息成功', { icon: 6 });
                                    window.parent.layer.close(formMeetingCloseIndex);

                                    //如果是新建入口 则不关闭，编辑入口就关闭
                                    setTimeout(function () {
                                        if (meetingIdForm && formOperType == "edit") {
                                            parent.$('.newIframeFixedDom', parent.document).prev().prev().click();
                                        }
                                    }, 500);

                                } else {
                                    layer.alert("保存会议信息失败:" + data.resultMessage, { icon: 5 });
                                }
                            }, function () {
                                layer.alert("保存会议信息失败:", { icon: 5 });
                                layer.close(meetingSaveLoader);
                            });

                        } else {//新增时的保存
                            common.fetchPost('meetingmgr/tiolMeeting/saveTiolMeetingInfo', obj.field, function (data) {
                                layer.close(meetingSaveLoader);
                                if (data.success) {
                                    loadFormValue(data);
                                    layer.alert('保存会议信息成功', { icon: 6 });
                                } else {
                                    layer.alert('保存会议信息失败' + data.resultMessage, { icon: 6 });
                                }
                            }, function () {
                                layer.alert("保存会议信息失败:", { icon: 5 });
                                layer.close(meetingSaveLoader);
                            });
                        }
                    } else {
                        layer.msg('该企业已存在相同名称、时间、类型的会议信息');//失败后提示
                        layer.close(meetingSaveLoader);
                    }
                }, function () {
                    layer.msg('校验会议信息失败');//失败后提示
                    layer.close(meetingSaveLoader);
                });
                return false;
            });

            form.on('submit(formAttendeeAdd)', function (obj) {
                var val = obj.field.attendeeName;
                if (val) {
                    obj.field.meetingId = $("#meetingId").val();
                    obj.field.participantsType = "ATTEND";
                    var layerLoader = common.layerLoader();
                    common.fetchPost('meetingmgr/tiolAttendee/saveTiolAttendeeInfo', obj.field, function (data) {
                        if (data.success) {
                            layer.msg('保存出席人成功');
                            table.reload('attendee-edit-table', {
                                page: {}
                                , where: {
                                    meetingId: meetingIdForm,
                                    participantsType: "ATTEND"
                                }
                            });
                        } else {
                            layer.msg("保存出席人失败:" + data.resultMessage);
                        }
                        layer.close(layerLoader);
                    }, function () {
                        layer.msg('保存出席人失败');//失败后提示
                        layer.close(layerLoader);
                    });
                }
                return false;
            });

            form.on('submit(formAbsentAdd)', function (obj) {
                var val = obj.field.attendeeName;
                if (val) {
                    obj.field.meetingId = $("#meetingId").val();
                    obj.field.participantsType = "ABSENT";
                    var layerLoader = common.layerLoader();
                    common.fetchPost('meetingmgr/tiolAttendee/saveTiolAttendeeInfo', obj.field, function (data) {
                        if (data.success) {
                            layer.msg('保存缺席人成功');
                            table.reload('absentTableReload', {
                                page: {}
                                , where: {
                                    meetingId: meetingIdForm,
                                    participantsType: "ABSENT"
                                }
                            });
                        } else {
                            layer.msg("保存缺席人失败:" + data.resultMessage);
                        }
                        layer.close(layerLoader);
                    }, function () {
                        layer.msg('保存缺席人失败');//失败后提示
                        layer.close(layerLoader);
                    });
                }
                return false;
            });

            form.on('submit(formAttenderAdd)', function (obj) {

                var val = obj.field.attenderSuName;
                if (val) {
                    obj.field.meetingId = $("#meetingId").val();
                    var layerLoader = common.layerLoader();
                    common.fetchPost('meetingmgr/tiolAttender/saveTiolAttenderInfo', obj.field, function (data) {
                        if (data.success) {
                            layer.msg('保存常设列席成功');
                            table.reload('attenderTableReload', {
                                page: {}
                                , where: {
                                    meetingId: meetingIdForm
                                }
                            });
                        } else {
                            layer.msg("保存常设列席失败:" + data.resultMessage);
                        }
                        layer.close(layerLoader);
                    }, function () {
                        layer.msg('保存常设列席失败');//失败后提示
                        layer.close(layerLoader);
                    });
                }
                return false;
            });

            form.on('submit(formSubjectEdit)', function (obj) {
                var val = obj.field.subjectCode;
                if (val) {
                    if (obj.field.passFlag && !obj.field.passFlagName) {
                        obj.field.passFlagName = passFlagMap[obj.field.passFlag]['sdName'];
                    }
                    obj.field.meetingId = $("#meetingId").val();
                    var layerLoader = common.layerLoader();
                    common.fetchPost('meetingmgr/tiolSubject/saveTiolSubjectInfo', obj.field, function (data) {
                        if (data.success) {
                            layer.close(yt_index_edit);
                            layer.msg('保存议题成功');
                            table.reload('subjectTableReload', {
                                page: {}
                                , where: {
                                    meetingId: meetingIdForm
                                }
                            });
                        } else {
                            layer.msg("保存议题失败:" + data.resultMessage);
                        }
                        layer.close(layerLoader);
                    }, function () {
                        layer.msg('保存议题失败');//失败后提示
                        layer.close(layerLoader);
                    });
                }
                return false;
            });


            // --------------------------------保存表单END--------------------------------


            function userEditLayer(obj) {
                common.fetchGet('sysmgr/dicts/selectDictListByPcode?dictPCode=attendStatus', function (data) {
                    if (data && data.list && data.list.length > 0) {
                        participantsTypeList = data.list;
                        $.map(data.list, function (item) {
                            participantsTypeMap[item.sdCode] = item;
                        });
                    }
                });
                var objParam = $.extend({
                    title: '编辑',
                    offset: '10px',
                    area: ['80%', '90%'],//高度自适应
                    btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                    btnAlign: 'c',
                }, obj);
                var index_qx = layer.open({
                    offset: objParam.offset,
                    title: objParam.title,
                    area: objParam.area,
                    type: 1,//页面层
                    shadeClose: false,
                    btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                    btnAlign: objParam.btnAlign,
                    yes: function () {

                        return false;
                    },
                    content: $('.attendee-edit-layer').html(),
                    success: function (obj) {
                        table.render(common.tableInitParams({
                            elem: $(obj.selector).find('#attendee-edit-table'),
                            id: "attendee-edit-table",
                            url: baseUrl + 'meetingmgr/tiolAttendee/selectTiolAttendeePage?meetingId=' + meetingIdForm,
                            contentType: 'text/plain',
                            method: 'get',
                            // request:null,
                            toolbar: '#absentToolBar',
                            // data:qxryData,
                            cellMinWidth: 60,
                            height: 'full-300',
                            defaultToolbar: [],
                            cols: [
                                [
                                    { type: 'checkbox' },
                                    { type: 'numbers', title: '序号' },
                                    { field: 'attendeeName', title: '出席人员', minWidth: 120 },
                                    { field: 'attendeeJob', title: '职位', minWidth: 120 },
                                    {
                                        field: 'participantsType', title: '状态', width: 80, templet: function (rowData) {
                                            if (JSON.stringify(participantsTypeMap) != JSON.stringify({}) && participantsTypeMap[rowData['participantsType']] != null) {
                                                return participantsTypeMap[rowData['participantsType']]['sdName'];
                                            } else {
                                                return "";
                                            }
                                        }
                                    },
                                    {
                                        field: 'isConvenor', title: '召集人', minWidth: 120, templet: function (rowData) {
                                            if (rowData['isConvenor'] === '1') {
                                                return '<span class="green">是</span>';
                                            } else {
                                                return '<span class="red">否</span>';
                                            }
                                        }
                                    },
                                    {
                                        field: 'isModerator', title: '主持人', width: 100, templet: function (rowData) {
                                            if (rowData['isModerator'] === '1') {
                                                return '<span class="green">是</span>';
                                            } else {
                                                return '<span class="red">否</span>';
                                            }
                                        }
                                    },
                                    { field: 'reason', title: '缺席原因', minWidth: 120 },
                                    { field: 'assignor', title: '委托人名', minWidth: 120 },
                                    { field: 'remark', title: '备注', minWidth: 120 },
                                    { field: '', title: '操作', width: 80, toolbar: '#attendee-edit-table-oper', fixed: 'right' }
                                ]
                            ],
                            done: function () {

                            }
                        }));
                        table.on('toolbar(attendee-edit-table)', function (obj) {
                            var checkStatus = table.checkStatus(obj.config.id);
                            // var data = obj.data;
                            var data = obj.config;
                            switch (obj.event) {
                                case 'add':
                                    var index_add = layer.open({
                                        offset: '10px',
                                        title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>新增出席人员',
                                        maxmin: false,
                                        area: ['580px', '90%'],//高度自适应
                                        type: 1,//页面层
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                        btnAlign: 'c',
                                        yes: function () {
                                            $("[lay-filter='formAttendeeAdd']").click();
                                            layer.close(index_add);
                                            return false;
                                        },
                                        btn2: function () {
                                            layer.close(index_add);
                                        },
                                        content: $('.setAdd-attendeeForm').html(),//加载该区域的html
                                        success: function (obj) {
                                            form.render();
                                        }
                                    });
                                    break;
                                case 'del':
                                    //点击删除按钮
                                    if (checkStatus.data.length > 0) {
                                        layer.confirm('确定删除选中列?', { icon: 3, title: '提示', offset: '150px' }, function (index) {
                                            // layer.msg('已删除');
                                            // return false;
                                            var attendeeIdArr = [];

                                            for (var i = 0; i < checkStatus.data.length; i++) {
                                                attendeeIdArr.push(checkStatus.data[i]['attendeeId'])
                                            }
                                            var layerLoader = common.layerLoader();
                                            common.fetchDelete('meetingmgr/tiolAttendee/deleteTiolAttendeeByIds?attendeeIds=' + attendeeIdArr.join(','), function () {
                                                layer.close(layerLoader);
                                                //成功之后刷新tree 以及表格
                                                // eventHandle.tableReload(currentTableId);
                                                table.reload('attendeeTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm,
                                                        participantsType: "ATTEND"
                                                    }
                                                });
                                                layer.msg('删除出席人成功');
                                            }, function () {
                                                layer.close(layerLoader);
                                            });

                                            layer.close(index);
                                        });
                                    } else {
                                        layer.msg('请选择删除列')
                                    }
                                    break;
                                case 'choose':
                                    var index_add = layer.open({
                                        offset: '10px',
                                        title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>选择出席人员',
                                        maxmin: false,
                                        area: ['580px', '90%'],//高度自适应
                                        type: 1,//页面层
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                        btnAlign: 'c',
                                        yes: function () {
                                            var seId = $("#curSeId")[0].value;
                                            var checkStatus = table.checkStatus("memberTableReload");
                                            var memberTypeIdArr = [];
                                            for (var i = 0; i < checkStatus.data.length; i++) {
                                                memberTypeIdArr.push(checkStatus.data[i]['memberTypeId'])
                                            }
                                            var meetingId = $("#meetingId")[0].value;
                                            var layerLoader = common.layerLoader();
                                            common.fetchPost('meetingmgr/tiolAttendee/saveTiolAttendeeInfoRel', { "memberTypeIds": memberTypeIdArr.join(','), "meetingId": meetingId, participantsType: "ATTEND" }, function () {
                                                layer.close(layerLoader);
                                                //成功之后刷新tree 以及表格
                                                table.reload('memberTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm,
                                                        meetingTypeId: meetingTypeId,
                                                        seId: seId,
                                                        memberAttendeeType: 'attendee'
                                                    }
                                                });
                                                //成功之后刷新tree 以及表格
                                                table.reload('attendeeTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm,
                                                        participantsType: "ATTEND"
                                                    }
                                                });
                                                layer.msg('关联成功');
                                            }, function () {
                                                layer.close(layerLoader);
                                            });

                                            layer.close(index_add);
                                            return false;
                                        },
                                        btn2: function () {
                                            layer.close(index_add);
                                        },
                                        content: $('.memberTable').html(),//加载该区域的html
                                        success: function (obj) {
                                            var seId = $("#curSeId")[0].value;
                                            table.render(common.tableInitParams({
                                                elem: $(obj.selector).find('#memberTable'),
                                                url: baseUrl + 'meetingmgr/tiolCompanyMember/selectTiolCompanyMemberPageSelect',
                                                // contentType:'text/plain',
                                                id: 'memberTableReload',
                                                method: 'post',
                                                where: { "meetingTypeId": meetingTypeId, "seId": seId, memberAttendeeType: 'attendee', meetingId: meetingIdForm, },
                                                // request:null,
                                                // toolbar:'#memberToolBar',
                                                // data:resAdd,
                                                height: 'full-200',
                                                defaultToolbar: [],
                                                cols: [
                                                    [
                                                        { type: 'checkbox' },
                                                        { type: 'numbers', title: '序号' },
                                                        { field: 'memberName', title: '姓名' },
                                                        { field: 'jobName', title: '职位' },
                                                        { field: 'startDate', title: '开始时间' },
                                                        { field: 'endDate', title: '结束时间' }
                                                    ]
                                                ],
                                                done: function () {

                                                }
                                            }));
                                        }
                                    });
                                    break;
                            }
                        });
                        table.on('tool(attendee-edit-table)', function (obj) {
                            var data = obj.data;
                            switch (obj.event) {
                                case 'edit'://编辑
                                    var edit_attend = layer.open({
                                        title: '编辑出席人员情况',
                                        type: 1,//页面层
                                        area: ['60%', '80%'],
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                        btnAlign: 'c',
                                        content: $('.attendeeStatusLayer').html(),//加载该区域的html
                                        success: function (obj) {
                                            common.selectDataSet({
                                                elem: $('[name=participantsType]'),
                                                loadData: participantsTypeList,
                                                optionText: 'sdName',
                                                optionValue: 'sdCode'
                                            });
                                            var parent = $(obj.selector);
                                            parent.find('input[name=attendeeId]').val(data.attendeeId);
                                            parent.find('input[name=attendeeName]').val(data.attendeeName);
                                            parent.find('input[name=attendeeJob]').val(data.attendeeJob);
                                            parent.find('input[name=reason]').val(data.reason);
                                            parent.find('input[name=ggSort]').val(data.ggSort);
                                            parent.find('[name=participantsType]').val(data.participantsType);
                                            form.on('select(participantsType)', function (data) {
                                                if (data.value === "ATTEND") {
                                                    // 出席：【缺席原因】、【委托人名】默认隐藏，【召集主持】展示
                                                    parent.find('.quexiArea').show();
                                                    parent.find('.weituoArea').hide();
                                                    parent.find('.zhuchiArea').show();

                                                } else if (data.value === "ABSENT") {
                                                    //缺席：展现【缺席原因】供选择缺席原因。
                                                    parent.find('.quexiArea').show();
                                                    parent.find('.weituoArea').hide();
                                                    parent.find('.zhuchiArea').hide();
                                                }
                                                else if (data.value === "ENTRUST") {
                                                    // 委托：展现【缺席原因】、【委托人名】供选择缺席原因及委托人名。
                                                    parent.find('.quexiArea').show();
                                                    parent.find('.weituoArea').show();
                                                    parent.find('.zhuchiArea').show();
                                                }
                                                else if (data.value === "AVOID") {
                                                    // 回避：【缺席原因】、【委托人名】默认隐藏
                                                    parent.find('.quexiArea').hide();
                                                    parent.find('.weituoArea').hide();
                                                    parent.find('.zhuchiArea').show();
                                                }
                                            });
                                            form.render();
                                        },
                                        yes: function () {
                                            var parent = $(obj.selector);
                                            console.dir(parent.find('input[name=attendeeName]'));
                                            common.fetchPost(saveAttendInfoUrl, {
                                                attendeeId: obj.attendeeId,
                                                attendeeName: parent.find('input[name=attendeeName]').val(),
                                                attendeeJob: parent.find('input[name=attendeeJob]').val(),
                                                reason: parent.find('input[name=reason]').val(),
                                                ggSort: parent.find('input[name=ggSort]').val(),
                                                participantsType: parent.find('[name=participantsType]').val(),
                                                isConvenor: parent.find('[name=participantsType]').val(),
                                                isModerator: parent.find('[name=participantsType]').val(),
                                                assignor: parent.find('input[name=assignor]').val()
                                            }, function (data) {
                                                if (data.success) {
                                                    layer.msg('编辑出席人成功');
                                                    table.reload('attendee-edit-table', {
                                                        page: {}
                                                        , where: {
                                                            meetingId: meetingIdForm
                                                        }
                                                    });
                                                } else {
                                                    layer.msg("编辑出席人失败:" + data.resultMessage);
                                                }
                                                layer.close(edit_attend);
                                            }, function () {
                                                layer.msg('编辑出席人失败');//失败后提示
                                                layer.close(edit_attend);
                                            });
                                        },
                                        btn2: function () {
                                            layer.close(yt_index_edit);
                                        },
                                    });
                            }
                        });
                    }
                });
                return false;
            }

            //出席人员选择
            $('#attendee-setting').on('click', function () {
                var attendLayer = layer.open({
                    offset: '10px',
                    title: '选择出席人员分组',
                    // maxmin: false,
                    area: ['80%', '90%'],//高度自适应
                    type: 1,//页面层
                    shadeClose: false,
                    btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                    btnAlign: 'c',
                    content: '<div class="moduleBox"><table lay-filter="attendanceGroupTable" id="attendanceGroupTable"></table></div>',
                    success: function (obj) {
                        table.render(common.tableInitParams({
                            elem: '#attendanceGroupTable',
                            url: memberChooseUrl,
                            method: 'post',
                            height: 'full-190',
                            limit: 100000,
                            cols: [
                                [
                                    { type: 'radio' },
                                    { "type": "numbers", "title": "序号" },
                                    { field: 'tcgName', title: '分组名称' },
                                    { field: 'attendanceNames', title: '出席人员' },
                                    { field: 'observerNames', title: '列席人员' },
                                    { field: 'tcgStartDate', title: '适用开始日期', width: 135 }
                                ]
                            ],
                            page: false,
                            done: function () {
                                // common.buttonLimit();
                                // 默认第一列选中
                            }
                        }));
                    },
                    yes: function () {

                        //获取选中组
                        var checkStatus = table.checkStatus('attendanceGroupTable');
                        if (!checkStatus.data) {
                            layer.msg('请选择出席人员分组');
                            return false;
                        }
                        //召集人
                        $('[name=convenor]').val(checkStatus.data[0].attendanceList[0].tcgmMemberName);
                        //主持人
                        $('[name=moderatorName]').val(checkStatus.data[0].attendanceList[0].tcgmMemberName);
                        //出席人
                        $('[name=attendeeNames]').val(checkStatus.data[0].attendanceNames);
                        //列席人
                        $('[name=attenders]').val(checkStatus.data[0].observerNames);
                        layer.close(attendLayer);
                        return false;
                    }
                });
                return false;
            });
            //出席人编辑
            $('#attendee-edit').off().on('click', function () {
                userEditLayer({
                    title: '编辑出席人员'
                });
                return false;
            });

            //支持人选择
            $('#zhuchi-setting').off().on('click', function () {
                var zhuchirenLayer = layer.open({
                    offset: '10px',
                    title: '主持人原则',
                    // maxmin: false,
                    area: ['80%', '90%'],//高度自适应
                    type: 1,//页面层
                    shadeClose: false,
                    btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                    btnAlign: 'c',
                    content: '<div class="moduleBox"><table lay-filter="zhuichiGroupTable" id="zhuichiGroupTable"></table></div>',
                    success: function (obj) {
                        table.render(common.tableInitParams({
                            elem: '#zhuichiGroupTable',
                            url: memberChooseUrl,
                            method: 'post',
                            height: 'full-190',
                            limit: 100000,
                            cols: [
                                [
                                    { type: 'radio' },
                                    { "type": "numbers", "title": "序号" },
                                    { field: 'tcgName', title: '分组名称' },
                                    { field: 'attendanceNames', title: '出席人员' },
                                    { field: 'observerNames', title: '列席人员' },
                                    { field: 'tcgStartDate', title: '适用开始日期', width: 135 }
                                ]
                            ],
                            page: false,
                            done: function () {
                                // common.buttonLimit();
                                // 默认第一列选中
                            }
                        }));
                    },
                    yes: function () {
                        var checkStatus = table.checkStatus('zhuichiGroupTable');
                        //获取选中组
                        if (!checkStatus.data) {
                            layer.msg('请选择人员分组');
                            return false;
                        }
                        var postData = {};
                        var moderatorName = checkStatus.data[0].attendanceList[0].tcgmMemberName;
                        var convenor = checkStatus.data[0].attendanceList[0].tcgmMemberName;
                        var attendanceList = checkStatus.data[0].attendanceList;
                        var observerList = checkStatus.data[0].observerList;
                        postData.moderatorName = moderatorName;
                        postData.convenor = convenor;
                        postData.attendanceList = attendanceList;
                        postData.observerList = observerList;
                        postData.meetingId = meetingIdForm;
                        common.fetchPost(saveMemberInfoUrl, postData, function (data) {
                            if (data.success) {
                                //召集人
                                $('[name=convenor]').val(checkStatus.data[0].attendanceList[0].tcgmMemberName);
                                //主持人
                                $('[name=moderatorName]').val(checkStatus.data[0].attendanceList[0].tcgmMemberName);
                                //出席人
                                $('[name=attendeeNames]').val(checkStatus.data[0].attendanceNames);
                                //列席人
                                $('[name=attenders]').val(checkStatus.data[0].observerNames);
                                layer.close(zhuchirenLayer);
                            } else {
                                layer.msg("保存人员信息失败:" + data.resultMessage);
                            }
                        }, function () {
                            layer.msg('查询人员信息失败');//失败后提示
                        });
                        return false;
                    }
                });

                return false;
            });
            //召集人选择
            $('#attend-setting').off().on('click', function () {
                var attendLayer = layer.open({
                    offset: '10px',
                    title: '选择参会人员分组',
                    // maxmin: false,
                    area: ['80%', '90%'],//高度自适应
                    type: 1,//页面层
                    shadeClose: false,
                    btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                    btnAlign: 'c',
                    content: '<div class="moduleBox"><table lay-filter="attendGroupTable" id="attendGroupTable"></table></div>',
                    success: function (obj) {
                        table.render(common.tableInitParams({
                            elem: '#attendGroupTable',
                            url: memberChooseUrl,
                            method: 'post',
                            height: 'full-190',
                            limit: 100000,
                            cols: [
                                [
                                    { type: 'radio' },
                                    { "type": "numbers", "title": "序号" },
                                    { field: 'tcgName', title: '分组名称' },
                                    { field: 'attendanceNames', title: '出席人员' },
                                    { field: 'observerNames', title: '列席人员' },
                                    { field: 'tcgStartDate', title: '适用开始日期', width: 135 }
                                ]
                            ],
                            page: false,
                            done: function () {
                                // common.buttonLimit();
                                // 默认第一列选中
                            }
                        }));
                    },
                    yes: function () {
                        var checkStatus = table.checkStatus('attendGroupTable');
                        //获取选中组
                        if (!checkStatus.data) {
                            layer.msg('请选择人员分组');
                            return false;
                        }
                        var postData = {};
                        var moderatorName = checkStatus.data[0].attendanceList[0].tcgmMemberName;
                        var convenor = checkStatus.data[0].attendanceList[0].tcgmMemberName;
                        var attendanceList = checkStatus.data[0].attendanceList;
                        var observerList = checkStatus.data[0].observerList;
                        postData.moderatorName = moderatorName;
                        postData.convenor = convenor;
                        postData.attendanceList = attendanceList;
                        postData.observerList = observerList;
                        postData.meetingId = meetingIdForm;
                        common.fetchPost(saveMemberInfoUrl, postData, function (data) {
                            if (data.success) {
                                //召集人
                                $('[name=convenor]').val(convenor);
                                //主持人
                                $('[name=moderatorName]').val(moderatorName);
                                //出席人
                                $('[name=attendeeNames]').val(checkStatus.data[0].attendanceNames);
                                //列席人
                                $('[name=attenders]').val(checkStatus.data[0].observerNames);
                                layer.close(attendLayer);
                            } else {
                                layer.msg("保存人员信息失败:" + data.resultMessage);
                            }
                        }, function () {
                            layer.msg('查询人员信息失败');//失败后提示
                        });
                        return false;
                    }
                });

                return false;
            });
            //召集人编辑
            $('#attend-edit').off().on('click', function () {
                userEditLayer({
                    title: '编辑召集人'
                });
                return false;
            });

            //主持人编辑
            $('#zhuchi-edit').off().on('click', function () {
                userEditLayer({
                    title: '编辑主持人'
                });
                return false;
            });
            //缺席人员选择
            $('#absent-edit').on('click', function () {
                var index_qx = layer.open({
                    offset: '10px',
                    title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>缺席人员选择',
                    // maxmin: false,
                    area: ['800px', '90%'],//高度自适应
                    type: 1,//页面层
                    shadeClose: false,
                    btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                    btnAlign: 'c',
                    yes: function () {
                        common.fetchPost('meetingmgr/tiolAttendee/selectTiolAttendeeList', { meetingId: meetingIdForm, participantsType: "ABSENT" }, function (data) {
                            if (data.success) {
                                $("#absentNames").val(data.object);
                            } else {
                                layer.msg("查询出席人员信息失败:" + data.resultMessage);
                            }
                        }, function () {
                            layer.msg('查询出席人员信息失败');//失败后提示
                        });
                        layer.close(index_qx);
                        return false;
                    },
                    btn2: function () {
                        layer.close(index_qx);
                        return false;
                    },
                    content: $('.set-absentForm').html(),//加载该区域的html
                    success: function (obj) {
                        table.render(common.tableInitParams({
                            elem: $(obj.selector).find('#absentTable'),
                            id: "absentTableReload",
                            url: baseUrl + 'meetingmgr/tiolAttendee/selectTiolAttendeePage?meetingId=' + meetingIdForm + '&participantsType=ABSENT',
                            contentType: 'text/plain',
                            method: 'get',
                            // request:null,
                            toolbar: '#absentToolBar',
                            // data:qxryData,
                            cellMinWidth: 60,
                            height: 'full-300',
                            defaultToolbar: [],
                            cols: [
                                [
                                    { type: 'checkbox' },
                                    { type: 'numbers', title: '序号' },
                                    { field: 'attendeeName', title: '缺席人' },
                                    { field: 'reason', title: '缺席原因' },
                                    { field: 'assignor', title: '委托人' },
                                    { field: 'remark', title: '备注' },
                                    { field: '', title: '操作', toolbar: '#absentTableOper' },
                                ]
                            ],
                            done: function () {

                            }
                        }));
                        table.on('toolbar(absentTable)', function (obj) {
                            var checkStatus = table.checkStatus(obj.config.id);
                            // var data = obj.data;
                            var data = obj.config;
                            switch (obj.event) {
                                case 'add':
                                    var index_add = layer.open({
                                        offset: '10px',
                                        title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>新增缺席人员',
                                        maxmin: false,
                                        area: ['580px', '90%'],//高度自适应
                                        type: 1,//页面层
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                        btnAlign: 'c',
                                        yes: function () {
                                            $("[lay-filter='formAbsentAdd']").click();
                                            layer.close(index_add);
                                            return false;
                                        },
                                        btn2: function () {
                                            layer.close(index_add);
                                        },
                                        content: $('.setAdd-absentForm').html(),//加载该区域的html
                                        success: function (obj) {
                                            form.render();
                                        }
                                    });
                                    break;
                                case 'del':
                                    //点击删除按钮
                                    if (checkStatus.data.length > 0) {
                                        layer.confirm('确定删除选中列?', { icon: 3, title: '提示', offset: '150px' }, function (index) {
                                            // layer.msg('已删除');
                                            // return false;
                                            var attendeeIdArr = [];

                                            for (var i = 0; i < checkStatus.data.length; i++) {
                                                attendeeIdArr.push(checkStatus.data[i]['attendeeId'])
                                            }
                                            var layerLoader = common.layerLoader();
                                            common.fetchDelete('meetingmgr/tiolAttendee/deleteTiolAttendeeByIds?attendeeIds=' + attendeeIdArr.join(','), function () {
                                                layer.close(layerLoader);
                                                //成功之后刷新tree 以及表格
                                                // eventHandle.tableReload(currentTableId);
                                                table.reload('absentTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm,
                                                        participantsType: "ABSENT"
                                                    }
                                                });
                                                layer.msg('删除缺席人成功');
                                            }, function () {
                                                layer.close(layerLoader);
                                            });

                                            layer.close(index);
                                        });
                                    } else {
                                        layer.msg('请选择删除列')
                                    }
                                    break;
                                case 'choose':
                                    var index_add = layer.open({
                                        offset: '10px',
                                        title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>选择缺席人员',
                                        maxmin: false,
                                        area: ['580px', '90%'],//高度自适应
                                        type: 1,//页面层
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                        btnAlign: 'c',
                                        yes: function () {
                                            var seId = $("#curSeId")[0].value;
                                            var checkStatus = table.checkStatus("memberTableReload");
                                            var memberTypeIdArr = [];
                                            for (var i = 0; i < checkStatus.data.length; i++) {
                                                memberTypeIdArr.push(checkStatus.data[i]['memberTypeId'])
                                            }
                                            var meetingId = $("#meetingId")[0].value;
                                            var layerLoader = common.layerLoader();
                                            common.fetchPost('meetingmgr/tiolAttendee/saveTiolAttendeeInfoRel', { "memberTypeIds": memberTypeIdArr.join(','), "meetingId": meetingId, participantsType: "ABSENT" }, function () {
                                                layer.close(layerLoader);
                                                //成功之后刷新tree 以及表格
                                                table.reload('memberTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm,
                                                        meetingTypeId: meetingTypeId,
                                                        seId: seId,
                                                        memberAttendeeType: 'attendee'
                                                    }
                                                });
                                                //成功之后刷新tree 以及表格
                                                table.reload('absentTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm,
                                                        participantsType: "ABSENT"
                                                    }
                                                });
                                                layer.msg('关联成功');
                                            }, function () {
                                                layer.close(layerLoader);
                                            });

                                            layer.close(index_add);
                                            return false;
                                        },
                                        btn2: function () {
                                            layer.close(index_add);
                                        },
                                        content: $('.memberTable').html(),//加载该区域的html
                                        success: function (obj) {
                                            var seId = $("#curSeId")[0].value;
                                            table.render(common.tableInitParams({
                                                elem: $(obj.selector).find('#memberTable'),
                                                url: baseUrl + 'meetingmgr/tiolCompanyMember/selectTiolCompanyMemberPageSelect',
                                                // contentType:'text/plain',
                                                id: 'memberTableReload',
                                                method: 'post',
                                                where: { "meetingTypeId": meetingTypeId, "seId": seId, memberAttendeeType: 'attendee', meetingId: meetingIdForm, },
                                                // request:null,
                                                // toolbar:'#memberToolBar',
                                                // data:resAdd,
                                                height: 'full-200',
                                                defaultToolbar: [],
                                                cols: [
                                                    [
                                                        { type: 'checkbox' },
                                                        { type: 'numbers', title: '序号' },
                                                        { field: 'memberName', title: '姓名' },
                                                        { field: 'jobName', title: '职位' },
                                                        { field: 'startDate', title: '开始时间' },
                                                        { field: 'endDate', title: '结束时间' }
                                                    ]
                                                ],
                                                done: function () {

                                                }
                                            }));
                                        }
                                    });
                                    break;
                            }
                        });
                    }
                    , cancel: function (index, layero) {

                    }
                });
                return false;
            });

            //常设列席选择
            $('#attender-setting').on('click', function () {
                var index_qx = layer.open({
                    offset: '10px',
                    title: '编辑常设列席人员情况',
                    // maxmin: false,
                    area: ['800px', '90%'],//高度自适应
                    type: 1,//页面层
                    shadeClose: false,
                    btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                    btnAlign: 'c',
                    yes: function () {
                        common.fetchPost('meetingmgr/tiolAttender/selectTiolAttenderList', { meetingId: meetingIdForm }, function (data) {
                            if (data.success) {
                                $("#attenders").val(data.object);
                            } else {
                                layer.msg("查询常设列席信息失败:" + data.resultMessage);
                            }
                        }, function () {
                            layer.msg('查询常设列席信息失败');//失败后提示
                        });
                        layer.close(index_qx);
                        return false;
                    },
                    btn2: function () {
                        layer.close(index_qx);
                        return false;
                    },
                    content: $('.set-attenderForm').html(),//加载该区域的html
                    success: function (obj) {
                        table.render(common.tableInitParams({
                            elem: $(obj.selector).find('#attenderTable'),
                            id: "attenderTableReload",
                            url: baseUrl + 'meetingmgr/tiolAttender/selectTiolAttenderPage?meetingId=' + meetingIdForm,
                            contentType: 'text/plain',
                            method: 'get',
                            // request:null,
                            toolbar: '#attenderToolBar',
                            // data:qxryData,
                            cellMinWidth: 60,
                            height: 'full-300',
                            defaultToolbar: [],
                            cols: [
                                [
                                    { type: 'checkbox' },
                                    { type: 'numbers', title: '序号' },
                                    { field: 'attenderSuName', title: '常设列席人' },
                                    { field: 'attenderJob', title: '岗位' },
                                    { field: '', title: '操作', toolbar: '#attenderTableOper' }
                                ]
                            ],
                            done: function () {

                            }
                        }));
                        table.on('toolbar(attenderTable)', function (obj) {
                            var checkStatus = table.checkStatus(obj.config.id);
                            // var data = obj.data;
                            var data = obj.config;
                            switch (obj.event) {
                                case 'add':
                                    var index_add = layer.open({
                                        offset: '10px',
                                        title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>新增常设列席',
                                        maxmin: false,
                                        area: ['580px', '90%'],//高度自适应
                                        type: 1,//页面层
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                        btnAlign: 'c',
                                        yes: function () {
                                            $("[lay-filter='formAttenderAdd']").click();
                                            layer.close(index_add);
                                            return false;
                                        },
                                        btn2: function () {
                                            layer.close(index_add);
                                        },
                                        content: $('.setAdd-attenderForm').html(),//加载该区域的html
                                        success: function (obj) {
                                            form.render();
                                        }
                                    });
                                    break;
                                case 'del':
                                    //点击删除按钮
                                    if (checkStatus.data.length > 0) {
                                        layer.confirm('确定删除选中列?', { icon: 3, title: '提示', offset: '150px' }, function (index) {

                                            var attenderIdArr = [];

                                            for (var i = 0; i < checkStatus.data.length; i++) {
                                                attenderIdArr.push(checkStatus.data[i]['attenderId'])
                                            }
                                            var layerLoader = common.layerLoader();
                                            common.fetchDelete('meetingmgr/tiolAttender/deleteTiolAttenderByIds?attenderIds=' + attenderIdArr.join(','), function () {
                                                layer.close(layerLoader);

                                                table.reload('attenderTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm
                                                    }
                                                });
                                                layer.msg('删除常设列席成功');
                                            }, function () {
                                                layer.close(layerLoader);
                                            });

                                            layer.close(index);
                                        });
                                    } else {
                                        layer.msg('请选择删除列')
                                    }
                                    break;
                                case 'choose':
                                    var index_add = layer.open({
                                        offset: '10px',
                                        title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>选择常设人员',
                                        maxmin: false,
                                        area: ['580px', '90%'],//高度自适应
                                        type: 1,//页面层
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                        btnAlign: 'c',
                                        yes: function () {
                                            var seId = $("#curSeId")[0].value;
                                            var checkStatus = table.checkStatus("memberTableReload");
                                            var memberTypeIdArr = [];
                                            for (var i = 0; i < checkStatus.data.length; i++) {
                                                memberTypeIdArr.push(checkStatus.data[i]['memberTypeId'])
                                            }
                                            var meetingId = $("#meetingId")[0].value;
                                            var layerLoader = common.layerLoader();
                                            common.fetchPost('meetingmgr/tiolAttender/saveTiolAttenderInfoRel', { "memberTypeIds": memberTypeIdArr.join(','), "meetingId": meetingId }, function () {
                                                layer.close(layerLoader);
                                                //成功之后刷新tree 以及表格
                                                table.reload('memberTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm,
                                                        meetingTypeId: meetingTypeId,
                                                        seId: seId,
                                                        memberAttendeeType: 'attender'
                                                    }
                                                });
                                                //成功之后刷新tree 以及表格
                                                table.reload('attenderTableReload', {
                                                    page: {}
                                                    , where: {
                                                        meetingId: meetingIdForm
                                                    }
                                                });
                                                layer.msg('关联成功');
                                            }, function () {
                                                layer.close(layerLoader);
                                            });

                                            layer.close(index_add);
                                            return false;
                                        },
                                        btn2: function () {
                                            layer.close(index_add);
                                        },
                                        content: $('.memberTable').html(),//加载该区域的html
                                        success: function (obj) {
                                            var seId = $("#curSeId")[0].value;
                                            table.render(common.tableInitParams({
                                                elem: $(obj.selector).find('#memberTable'),
                                                url: baseUrl + 'meetingmgr/tiolCompanyMember/selectTiolCompanyMemberPageSelect',
                                                // contentType:'text/plain',
                                                id: 'memberTableReload',
                                                method: 'post',
                                                where: { "meetingTypeId": meetingTypeId, "seId": seId, memberAttendeeType: 'attender', meetingId: meetingIdForm, },
                                                // request:null,
                                                // toolbar:'#memberToolBar',
                                                // data:resAdd,
                                                height: 'full-200',
                                                defaultToolbar: [],
                                                cols: [
                                                    [
                                                        { type: 'checkbox' },
                                                        { type: 'numbers', title: '序号' },
                                                        { field: 'memberName', title: '姓名' },
                                                        { field: 'jobName', title: '职位' },
                                                        { field: 'startDate', title: '开始时间' },
                                                        { field: 'endDate', title: '结束时间' }
                                                    ]
                                                ],
                                                done: function () {

                                                }
                                            }));
                                        }
                                    });
                                    break;
                            }
                        });
                    }
                });
                return false;
            });

            table.on('tool(ytList)', function (obj) {
                var data = obj.data;
                switch (obj.event) {
                    case 'viewCheckDetail'://编辑
                        yt_index_edit = layer.open({
                            offset: '10px',
                            title: '审议详情',
                            maxmin: false,
                            type: 1,//页面层
                            area: ['100%', '90%'],//高度自适应
                            // area: ['580px'],//高度自适应
                            shadeClose: false,
                            btn: ['<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>关闭'],
                            btnAlign: 'c',
                            yes: function () {
                                layer.close(yt_index_edit);
                            },
                            content: $('#edit-syForm').html(),//加载该区域的html
                            success: function (obj) {
                                form.render();
                                $('#yaView').on('click', function () {
                                    var meetingTypeName = common.getQueryVariable('meetingTypeName');
                                    
                                    var viewMeeting = top.layer.open({
                                        title: ['议案查看'],
                                        type: 2,
                                        content: baseUrl + 'src/page/ys/yagl/yaListReportedView.html?motionId=' + data.subjectId + "&meetingTypeName=" + meetingTypeName,
                                        maxmin: true
                                    });
                                    top.layer.full(viewMeeting);
                                })
                                eventHandle.initDict(['exigence', 'passFlag', 'resultType', 'position']);
                                var subjectIdForm = data.subjectId;
                                common.fetchGet('sysmgr/dicts/selectDictListByPcode?dictPCode=attendStatus', function (data) {
                                    if (data && data.list && data.list.length > 0) {
                                        attendStatusList = data.list;
                                        $.map(data.list, function (item) {
                                            attendStatusMap[item.sdCode] = item;
                                        });
                                    }
                                });
                                common.fetchGet('sysmgr/dicts/selectDictListByPcode?dictPCode=DELIBERATIONRESULT', function (data) {
                                    if (data && data.list && data.list.length > 0) {
                                        deliberationResultList = data.list;
                                        $.map(data.list, function (item) {
                                            deliberationResultMap[item.sdCode] = item;
                                        });
                                    }
                                });
                                common.fetchPost('meetingmgr/tiolSubject/selectTiolSubjectById', { subjectId: data.subjectId }, function (data) {
                                    if (data.success) {
                                        $(obj.selector).find('input[name=subjectId]').val(data.object.subjectId);
                                        $(obj.selector).find('input[name=subjectName]').val(data.object.subjectName);
                                        $(obj.selector).find('input[name=subjectCode]').val(data.object.subjectCode);
                                        $(obj.selector).find('select[name=exigence]').val(data.object.exigence);
                                        $(obj.selector).find('input[name=exigenceName]').val(data.object.exigenceName);
                                        $(obj.selector).find('input[name=deliberationName]').val(data.object.deliberationName);
                                        // $(obj.selector).find('input[name=deliberationName]').val('讨论类');

                                        $(obj.selector).find('input[name=resultTypeName]').val(data.object.resultTypeName);
                                        $(obj.selector).find('input[name=msSpeaker]').val(data.object.msSpeaker);
                                        $(obj.selector).find('input[name=attendances]').val(data.object.attendances);
                                        $(obj.selector).find('input[name=passFlagName]').val(data.object.passFlagName);
                                        $(obj.selector).find('textarea[name=subjectResult]').val(data.object.subjectResult);
                                        $(obj.selector).find('input[name=bjqk]').val(data.object.bjqk);
                                        // $(obj.selector).find('input[name=subjectCode]')
                                        //$(obj.selector).find('select[name=approvalFlag]').val(data.object.approvalFlag);
                                        form.render();

                                        // 判断审议类型=========================
                                        //讨论类和通报类没有审议结果和表决
                                        if (data.object.deliberationCode === "1" || data.object.deliberationCode === "2") {
                                            $('#bjxq').hide();
                                            $('#syjg').hide();
                                        } else {
                                            $('#bjxq').show();
                                            $('#syjg').show();
                                        }
                                    } else {
                                        layer.msg("查询会议信息失败:" + data.resultMessage);
                                    }
                                }, function () {
                                    layer.msg('查询会议信息失败');//失败后提示
                                });
                                var cols;
                                if(meetingTypeCode=='GD'){
                                	cols=[[
                                        { type: 'checkbox' },
                                        { type: 'numbers', title: '序号', width: 80 },
                                        { field: 'deliberationPersonnel', title: '股东名称' },
                                        { field: 'voteUser', title: '投票人' },
                                        { field: 'job', title: '职务' },
                                        { field: 'stockRatio', title: '持股比例' },
                                        { field: 'voteNum', title: '投票股数' },
                                        {
                                            field: 'attendStatus', title: '参会状态',
                                            templet: function (rowData) {
                                                if (rowData['attendStatus'] && attendStatusMap[rowData['attendStatus']]) {
                                                    return attendStatusMap[rowData['attendStatus']]['sdName'];
                                                } else {
                                                    return '';
                                                }
                                            }
                                        }
                                        , {
                                            field: 'deliberationResult', title: '审议意见',
                                            templet: function (rowData) {
                                                if (rowData['deliberationResult'] && deliberationResultMap[rowData['deliberationResult']]) {
                                                    if(rowData['deliberationResult'] == "同意"){
                                                return '<span class="green">同意</span>'
                                            }else if(rowData['deliberationResult'] == "反对"){
                                                return '<span class="red">反对</span>'
                                            }else{
                                                return '<span class="green3">弃权</span>'
                                            };
                                                } else {
                                                    return '';
                                                }
                                            }
                                        }
                                        , { field: 'remark', title: '备注' },
                                        { field: '', title: '操作', toolbar: '#bjTableOper', fixed: 'right' }
                                    ]];
                                }else{
                                	cols=[[
                                        { type: 'checkbox' },
                                        { type: 'numbers', title: '序号', width: 80 },
                                        { field: 'deliberationPersonnel', title: '姓名' },
                                        { field: 'job', title: '职务' },
                                        {
                                            field: 'attendStatus', title: '参会状态',
                                            templet: function (rowData) {
                                                if (rowData['attendStatus'] && attendStatusMap[rowData['attendStatus']]) {
                                                    return attendStatusMap[rowData['attendStatus']]['sdName'];
                                                } else {
                                                    return '';
                                                }
                                            }
                                        }
                                        , { field: 'reason', title: '缺席原因' }
                                        , {
                                            field: 'deliberationResult', title: '审议结果',
                                            templet: function (rowData) {
                                                if (rowData['deliberationResult'] && deliberationResultMap[rowData['deliberationResult']]) {
                                                    if(rowData['deliberationResult'] == "同意"){
                                                return '<span class="green">同意</span>'
                                            }else if(rowData['deliberationResult'] == "反对"){
                                                return '<span class="red">反对</span>'
                                            }else{
                                                return '<span class="green3">弃权</span>'
                                            };
                                                } else {
                                                    return '';
                                                }
                                            }
                                        }
                                        , { field: 'remark', title: '备注' },
                                        { field: '', title: '操作', toolbar: '#bjTableOper', fixed: 'right' }
                                    ]];
                                }
                                table.render(common.tableInitParams({//表决情况表
                                    elem: $(obj.selector).find('#bjTable'),
                                    url: baseUrl + 'meetingmgr/tiolDeliberation/selectTiolDeliberationPage?subjectId=' + data.subjectId,
                                    where: {
                                        subjectId: data.subjectId
                                    },
                                    method: 'post',
                                    height: '300',
                                    height:false,
                                    //toolbar:'#deliberationToolBar',
                                    defaultToolbar: [],
                                    cols:cols
                                }));
                                //table监听事件
                                table.on('toolbar(bjTable)', function (obj) {
                                    var checkStatus = table.checkStatus(obj.config.id);
                                    switch (obj.event) {
                                        case 'add':
                                            bj_index_edit = layer.open({
                                                offset: '10px',
                                                title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>新增表决表单',
                                                maxmin: false,
                                                type: 1,//页面层
                                                area: ['580px', '90%'],//高度自适应
                                                shadeClose: false,
                                                btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                                btnAlign: 'c',
                                                yes: function () {
                                                    $("[lay-filter='deliberationAdd']").click();
                                                    return false;
                                                },
                                                btn2: function () {
                                                    layer.close(bj_index_edit);
                                                },
                                                content: $('.bjqk-edit').html(),//加载该区域的html
                                                success: function (obj) {
                                                    form.render();
                                                    common.selectDataSet({
                                                        elem: $('[name=deliberationResult]'),
                                                        loadData: deliberationResultList,
                                                        optionText: 'sdName',
                                                        optionValue: 'sdCode'
                                                    });
                                                    $(obj.selector).find('input[name=deliberationId]').val(data.deliberationId);
                                                    $(obj.selector).find('input[name=subjectId]').val(data.subjectId);
                                                    $(obj.selector).find('input[name=deliberationPersonnel]').val(data.deliberationPersonnel);
                                                    $(obj.selector).find('input[name=job]').val(data.job);
                                                    $(obj.selector).find('input[name=attendStatusName]').val(data.attendStatus);
                                                    $(obj.selector).find('input[name=assignor]').val(data.assignor);
                                                    $(obj.selector).find('textarea[name=reason]').val(data.reason);
                                                    $(obj.selector).find('select[name=deliberationResult]').val(data.deliberationResult);
                                                    $(obj.selector).find('textarea[name=remark]').val(data.remark);
                                                    form.render('select');

                                                    
                                                }
                                            });
                                            break;
                                        case 'del':
                                            //点击删除按钮
                                            if (checkStatus.data.length > 0) {
                                                layer.confirm('确定删除选中列?', { icon: 3, title: '提示', offset: '150px' }, function (index) {
                                                    // layer.msg('演示 已删除');
                                                    // return false;
                                                    var deliberationIdArr = [];

                                                    for (var i = 0; i < checkStatus.data.length; i++) {
                                                        deliberationIdArr.push(checkStatus.data[i]['deliberationId'])
                                                    }
                                                    var subjectId = checkStatus.data[0].subjectId;
                                                    var layerLoader = common.layerLoader();
                                                    common.fetchPost('meetingmgr/tiolDeliberation/deleteTiolDeliberationByIds', { "deliberationIds": deliberationIdArr.join(',') }, function () {
                                                        layer.close(layerLoader);
                                                        eventHandle.shqkInit(subjectId);
                                                        table.reload('bjTable', {
                                                            page: {}
                                                            , where: {
                                                                subjectId: subjectId
                                                            }
                                                        });
                                                        layer.msg('删除成功');
                                                    }, function () {
                                                        layer.close(layerLoader);
                                                    });

                                                    layer.close(index);
                                                });
                                            } else {
                                                layer.msg('请选择删除列')
                                            }
                                            break;
                                    }
                                });
                                table.on('tool(bjTable)', function (obj) {
                                    var data = obj.data;
                                    switch (obj.event) {
                                        case 'edit'://编辑
                                            bj_index_edit = layer.open({
                                                offset: '10px',
                                                title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>编辑表决表单',
                                                maxmin: false,
                                                type: 1,//页面层
                                                area: ['580px', '90%'],//高度自适应
                                                shadeClose: false,
                                                btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                                btnAlign: 'c',
                                                yes: function () {
                                                    $("[lay-filter='deliberationAdd']").click();
                                                    //layer.close(index_edit);
                                                    return false;
                                                },
                                                btn2: function () {
                                                    layer.close(bj_index_edit);
                                                },
                                                content: $('.bjqk-edit').html(),//加载该区域的html
                                                success: function (obj) {
                                                    form.render();
                                                    common.selectDataSet({
                                                        elem: $('[name=deliberationResult]'),
                                                        loadData: deliberationResultList,
                                                        optionText: 'sdName',
                                                        optionValue: 'sdCode'
                                                    });
                                                    $(obj.selector).find('input[name=deliberationId]').val(data.deliberationId);
                                                    $(obj.selector).find('input[name=subjectId]').val(data.subjectId);
                                                    $(obj.selector).find('input[name=deliberationPersonnel]').val(data.deliberationPersonnel);
                                                    $(obj.selector).find('input[name=job]').val(data.job);
                                                    $(obj.selector).find('input[name=attendStatusName]').val(attendStatusMap[data.attendStatus]['sdName']);
                                                    $(obj.selector).find('textarea[name=reason]').val(data.reason);
                                                    $(obj.selector).find('select[name=deliberationResult]').val(data.deliberationResult);
                                                    $(obj.selector).find('textarea[name=remark]').val(data.remark);
                                                    form.render('select');
                                                }
                                            });
                                    }
                                });

                                //---------------------议题附件列表star
                                table.render(common.tableInitParams({//议题附件列表
                                    elem: $(obj.selector).find('#subjectFileTable'),
                                    url: baseUrl + 'dfsmgr/file/getFileByResIdAndFileType?id=' + subjectIdForm + '&type=OTHER_SUBJECT',
                                    method: 'post',
                                    height: '300',
                                    height:false,
                                    // toolbar:'#subjectFileToolBar',
                                    id: 'subjectFileTableReload',
                                    defaultToolbar: [],
                                    cols: [[
                                        { type: 'numbers', title: '序号' },
                                        { field: 'fiOriginalName', title: '文件名称' },
                                        { field: '', title: '操作', toolbar: '#subjectFileTableOper', width: 140, fixed: 'right',align:"cneter" }
                                    ]],
                                    done: function () {
                                        // common.buttonLimit();
                                    }
                                    , page: true
                                }));

                                table.on('toolbar(subjectFileTable)', function (obj) {
                                    var checkStatus = table.checkStatus(obj.config.id);
                                    // var data = obj.data;
                                    var data = obj.config;
                                    switch (obj.event) {
                                        case 'add':
                                            var loadIndex;
                                            var index_add = layer.open({
                                                title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>新增议题资料',
                                                area: ['580px', '480px'],//高度自适应
                                                type: 1,//页面层
                                                content: $('#subject-add').html(),//加载该区域的html
                                                success: function (obj) {
                                                    var parent = $(obj.selector);
                                                    $(obj.selector).find('.btnClose').off().on('click', function () {
                                                        layer.close(index_add);
                                                    });
                                                    var fileUpload = upload.render({
                                                        elem: '#uploadSubjectFile',
                                                        url: baseUrl + 'zuul/dfsmgr/file/fileUpload',
                                                        auto: false,
                                                        bindAction: "#fileSubjectUpload",
                                                        accept: 'file',
                                                        data: {
                                                            fname: function () {
                                                                return parent.find("input[name=fileName]").val()
                                                            },
                                                            memo: function () {
                                                                return parent.find('[name=maRemarks]').val()
                                                            }
                                                        },
                                                        //exts: 'pdf|ofd',
                                                        choose: function (obj) {
                                                            obj.preview(function (index, file, result) {
                                                                parent.find("#fileNameArea").show();
                                                                var arr = file.name.split('.');

                                                                if (file.name.split('.').length > 2) {
                                                                    var fileName = '';
                                                                    $.map(arr, function (item, index) {
                                                                        if (index !== (arr.length - 1)) {
                                                                            fileName += item;
                                                                        }
                                                                    });
                                                                    parent.find("input[name=fileName]").val(fileName);
                                                                } else {
                                                                    parent.find("input[name=fileName]").val(file.name.split('.')[0]);
                                                                }
                                                                parent.find("input[name=fileType]").val('.' + arr[arr.length - 1]);
                                                            });
                                                        },
                                                        before: function (obj) { //obj参数包含的信息，跟 choose回调完全一致，可参见上文。
                                                            //var fiFileType=$("select[name=fiFileType]").val();
                                                            this.data = {
                                                                resId: subjectIdForm,
                                                                fiFileType: "OTHER_SUBJECT",
                                                                fname: parent.find("input[name=fileName]").val(),
                                                                memo: parent.find('[name=maRemarks]').val()
                                                            };
                                                            loadIndex = layer.load();
                                                        },
                                                        done: function (res, index, upload) {
                                                            layer.close(loadIndex);
                                                            layer.close(index_add);
                                                            table.reload('subjectFileTableReload', {
                                                                page: {}
                                                                , where: {
                                                                    resId: subjectIdForm
                                                                }
                                                            });
                                                        }
                                                    });
                                                    form.render("select");

                                                }
                                            });
                                            break;
                                        case 'del':
                                            //点击删除按钮
                                            if (checkStatus.data.length > 0) {
                                                layer.confirm('确定删除选中列?', { icon: 3, title: '提示', offset: '150px' }, function (index) {
                                                    var fiIdArr = [];
                                                    for (var i = 0; i < checkStatus.data.length; i++) {
                                                        fiIdArr.push(checkStatus.data[i]['fiId'])
                                                    }
                                                    var layerLoader = common.layerLoader();
                                                    var id = fiIdArr.join(',');
                                                    common.fetchDelete('dfsmgr/file/deleteById?id=' + fiIdArr.join(','), function () {
                                                        table.reload('subjectFileTableReload', {
                                                            page: {}
                                                            , where: {
                                                                resId: subjectIdForm
                                                            }
                                                        });
                                                        layer.close(layerLoader);
                                                    }, function () {
                                                        layer.close(layerLoader);
                                                    });

                                                    layer.close(index);
                                                });
                                            } else {
                                                layer.msg('请选择删除列')
                                            }
                                            break;
                                    }
                                });

                                table.on('tool(subjectFileTable)', function (obj) {
                                    var data = obj.data;
                                    switch (obj.event) {
                                        case 'load':
                                            var sURL = baseUrl + "dfsmgr/file/filesDownload?fid=" + obj.data.fiId;
                                            window.location.href = sURL;
                                            break;
                                            case 'view':
                                            common.pdfPreview(data.fiId, data.fiSuffix);
                                            break;
                                    }
                                });
                                //---------------------议题附件列表end
                                $(obj.selector).find('#passFlag-btn').on('click', function () {
                                    layer.confirm('确定进行计算?', { icon: 3, title: '提示', offset: '150px' }, function (index) {
                                        var subjectFrom = $(obj.selector);
                                        var subjectId = subjectFrom.find('input[name=subjectId]').val();
                                        var layerLoader = common.layerLoader();
                                        common.fetchPost('meetingmgr/tiolDeliberation/selectTiolDeliberationJs?subjectId=' + subjectId, null, function (res) {
                                            $('select[name=passFlag]').val(res.object.passFlag);
                                            $('input[name=passFlagName]').val(res.object.passFlagName);
                                            form.render();
                                            if (res.object.resultMsg != '' && res.object.resultMsg != null) {
                                                layer.msg(res.object.resultMsg);
                                            } else {
                                                layer.msg('计算成功');
                                            }
                                            layer.close(layerLoader);
                                        }, function () {
                                            layer.close(layerLoader);
                                        });
                                        layer.close(index);
                                    });
                                    return false;
                                });
                                $(obj.selector).find('#attendances-btn').on('click', function () {
                                    var subjectFrom = $(obj.selector);
                                    var subjectId = subjectFrom.find('input[name=subjectId]').val();
                                    var index_lx = layer.open({
                                        offset: '10px',
                                        title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>列席人员选择',
                                        // maxmin: false,
                                        area: ['800px', '90%'],//高度自适应
                                        type: 1,//页面层
                                        shadeClose: false,
                                        btn: ['<i class="fa fa-check-circle"></i>确定'],
                                        btnAlign: 'c',
                                        yes: function () {
                                            common.fetchPost('meetingmgr/tiolAttendance/selectTiolAttendanceList', { subjectId: subjectId }, function (data) {
                                                if (data.success) {
                                                    subjectFrom.find('input[name=attendances]').val(data.object);
                                                    form.render();
                                                } else {
                                                    layer.msg("查询列席人员信息失败:" + data.resultMessage);
                                                }
                                            }, function () {
                                                layer.msg('查询列席人员信息失败');//失败后提示
                                            });
                                            layer.close(index_lx);
                                            return false;
                                        },
                                        content: $('.set-attendanceForm').html(),//加载该区域的html
                                        success: function (obj) {
                                            table.render(common.tableInitParams({
                                                elem: $(obj.selector).find('#attendanceTable'),
                                                id: "attendanceTableReload",
                                                url: baseUrl + 'meetingmgr/tiolAttendance/selectTiolAttendancePage?subjectId=' + subjectId,
                                                contentType: 'text/plain',
                                                method: 'get',
                                                toolbar: '#attendanceToolBar',
                                                cellMinWidth: 60,
                                                height: 'full-300',
                                                defaultToolbar: [],
                                                cols: [
                                                    [
                                                        { type: 'numbers', title: '序号' },
                                                        { field: 'attendanceName', title: '列席人' },
                                                        { field: 'positionName', title: '职位' }
                                                    ]
                                                ],
                                                done: function () {

                                                }
                                            }));
                                            table.on('toolbar(attendanceTable)', function (obj) {
                                                var checkStatus = table.checkStatus(obj.config.id);
                                                // var data = obj.data;
                                                var data = obj.config;
                                                switch (obj.event) {
                                                    case 'add':
                                                        var index_add = layer.open({
                                                            offset: '10px',
                                                            title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>新增列席人员',
                                                            maxmin: false,
                                                            area: ['580px', '380px'],//高度自适应
                                                            type: 1,//页面层
                                                            shadeClose: false,
                                                            btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                                                            btnAlign: 'c',
                                                            yes: function (index, obj) {
                                                                var objData = {};
                                                                var attendanceName = $(obj.selector).find('input[name=attendanceName]').val();
                                                                var position = $(obj.selector).find('input[name=position]').val();
                                                                var positionName = $(obj.selector).find('input[name=positionName]').val();
                                                                if (reg.test(attendanceName)) {
                                                                    layer.msg("列席人不能为空!");
                                                                    return;
                                                                }
                                                                if (positionName == "请选择") {
                                                                    positionName = '';
                                                                }
                                                                objData.attendanceName = attendanceName;
                                                                objData.position = position;
                                                                objData.positionName = positionName;
                                                                objData.subjectId = subjectId;
                                                                objData.meetingId = $("#meetingId").val();
                                                                common.fetchPost('meetingmgr/tiolAttendance/saveTiolAttendanceInfo', objData, function (data) {
                                                                    if (data.success) {
                                                                        layer.msg('保存列席人成功');
                                                                        table.reload('attendanceTableReload', {
                                                                            page: {}
                                                                            , where: {
                                                                                subjectId: subjectId
                                                                            }
                                                                        });
                                                                    } else {
                                                                        layer.msg("保存列席人失败:" + data.resultMessage);
                                                                    }
                                                                }, function () {
                                                                    layer.msg('保存列席人失败');//失败后提示
                                                                });
                                                                layer.close(index_add);
                                                                return false;
                                                            },
                                                            btn2: function () {
                                                                layer.close(index_add);
                                                            },
                                                            content: $('.setAdd-attendanceForm').html(),//加载该区域的html
                                                            success: function (obj) {
                                                                form.render();
                                                            }
                                                        });
                                                        break;
                                                    case 'del':
                                                        //点击删除按钮
                                                        if (checkStatus.data.length > 0) {
                                                            layer.confirm('确定删除选中列?', { icon: 3, title: '提示', offset: '150px' }, function (index) {
                                                                var attendanceIdArr = [];

                                                                for (var i = 0; i < checkStatus.data.length; i++) {
                                                                    attendanceIdArr.push(checkStatus.data[i]['attendanceId'])
                                                                }
                                                                var layerLoader = common.layerLoader();
                                                                common.fetchDelete('meetingmgr/tiolAttendance/deleteTiolAttendanceByIds?attendanceIds=' + attendanceIdArr.join(','), function () {
                                                                    layer.close(layerLoader);
                                                                    //成功之后刷新tree 以及表格
                                                                    table.reload('attendanceTableReload', {
                                                                        page: {}
                                                                        , where: {
                                                                            subjectId: subjectId
                                                                        }
                                                                    });
                                                                    layer.msg('删除列席人成功');
                                                                }, function () {
                                                                    layer.close(layerLoader);
                                                                });

                                                                layer.close(index);
                                                            });
                                                        } else {
                                                            layer.msg('请选择删除列')
                                                        }
                                                        break;
                                                }
                                            });
                                        }, cancel: function (index, layero) {

                                        }
                                    });

                                    return false;
                                });

                                form.render('select');
                            }
                        });
                        break;
                    case 'check'://查看
                    
                        var viewMeeting = layer.open({
                            // content: baseUrl + 'src/page/ys/hygl/hyReportLook.html?meetingId=' + data.meetingId,
                            title: ['议案详情'],
                            type: 2,
                            area: ['100%', '90%'],//高度自适应
                            // content: baseUrl + 'src/page/ys/hygl/hyReportSuubjectLook.html?subjectId=' + obj.data.subjectId,
                            content: baseUrl + 'src/page/ys/yagl/yaListReportedView.html?motionId=' + obj.data.subjectId ,
                            maxmin: true,
                            btn: ['<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>关闭'],
                            btnAlign: 'c',
                            yes: function () {
                                layer.close(viewMeeting);
                            },
                        });
                        layer.full(viewMeeting);
                        break;
                    // layer.full(yt_index_edit);
                }
            });

            //table监听事件
            table.on('toolbar(meetingFile)', function (obj) {
                var checkStatus = table.checkStatus(obj.config.id);
                // var data = obj.data;
                var data = obj.config;
                switch (obj.event) {
                    case 'add':
                        var index_add = layer.open({
                            title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>新增会议资料',
                            area: ['580px'],//高度自适应
                            type: 1,//页面层
                            content: $('#hyzl-add').html(),//加载该区域的html
                            success: function (obj) {
                                var parent = $(obj.selector);
                                eventHandle.initDict(['meetingFileType']);
                                laydate.render({
                                    elem: '[name=printTime]',
                                    type: 'date',
                                    done: function (value) {
                                        $('[name=releaseTime]').val(value);
                                    }
                                });
                                form.on('select(meetingFileType)', function (data) {

                                    if (data.value === 'SUMMARY') {
                                        parent.find('.printTimeArea').show()
                                    } else {
                                        parent.find('.printTimeArea').hide();
                                        $('[name=releaseTime]').val('');
                                    }
                                });

                                $(obj.selector).find('.btnClose').off().on('click', function () {
                                    layer.close(index_add);
                                });

                                var fileUpload = upload.render({
                                    elem: '#uploadFile',
                                    url: baseUrl + 'zuul/dfsmgr/file/fileUpload',
                                    auto: false,
                                    bindAction: "#fileUpload",
                                    accept: 'file',
                                    data: {
                                        fname: function () {
                                            return parent.find("input[name=fileName]").val()
                                        },
                                        memo: function () {
                                            return parent.find('[name=maRemarks]').val()
                                        }
                                    },
                                    //exts: 'pdf|ofd',
                                    choose: function (obj) {
                                        var fiFileType = $("select[name=fiFileType]").val();
                                        if (!fiFileType) {
                                            layer.alert("资料类型不能为空", {
                                                icon: 5
                                            });
                                        } else {
                                            obj.preview(function (index, file, result) {
                                                parent.find("#fileNameArea").show();
                                                var arr = file.name.split('.');

                                                if (file.name.split('.').length > 2) {
                                                    var fileName = '';
                                                    $.map(arr, function (item, index) {
                                                        if (index !== (arr.length - 1)) {
                                                            fileName += item;
                                                        }
                                                    });
                                                    parent.find("input[name=fileName]").val(fileName);
                                                } else {
                                                    parent.find("input[name=fileName]").val(file.name.split('.')[0]);
                                                }

                                                parent.find("input[name=fileType]").val('.' + arr[arr.length - 1]);
                                            });
                                        }
                                    },
                                    before: function (obj) { //obj参数包含的信息，跟 choose回调完全一致，可参见上文。
                                        var fiFileType = $("select[name=fiFileType]").val();
                                        this.data = {
                                            resId: meetingIdForm,
                                            fiFileType: fiFileType,
                                            fname: parent.find("input[name=fileName]").val(),
                                            memo: parent.find('[name=maRemarks]').val()
                                        };
                                    },
                                    done: function (res, index, upload) {
                                        layer.close(index_add);
                                        table.reload('meetingFileTableReload', {
                                            page: {}
                                            , where: {
                                                resId: meetingIdForm
                                            }
                                        });
                                    }
                                });
                                form.render("select");
                            },
                            btn: false
                        });
                        break;
                    case 'del':
                        //点击删除按钮
                        if (checkStatus.data.length > 0) {
                            layer.confirm('确定删除选中列?', { icon: 3, title: '提示', offset: '150px' }, function (index) {
                                var fiIdArr = [];
                                for (var i = 0; i < checkStatus.data.length; i++) {
                                    fiIdArr.push(checkStatus.data[i]['fiId'])
                                }
                                var layerLoader = common.layerLoader();
                                var id = fiIdArr.join(',');
                                common.fetchDelete('dfsmgr/file/deleteById?id=' + fiIdArr.join(','), function () {
                                    table.reload('meetingFileTableReload', {
                                        page: {}
                                        , where: {
                                            resId: meetingIdForm
                                        }
                                    });
                                    layer.close(layerLoader);
                                }, function () {
                                    layer.close(layerLoader);
                                });

                                layer.close(index);
                            });
                        } else {
                            layer.msg('请选择删除列')
                        }
                        break;
                }
            });
            table.on('tool(attendeeTable)', function (obj) {
                var data = obj.data;
                switch (obj.event) {
                    case 'edit':
                        var index_add = layer.open({
                            offset: '10px',
                            title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>编辑出席人员',
                            maxmin: false,
                            area: ['580px', '90%'],//高度自适应
                            type: 1,//页面层
                            shadeClose: false,
                            btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                            btnAlign: 'c',
                            yes: function () {
                                $("[lay-filter='formAttendeeAdd']").click();
                                layer.close(index_add);
                                return false;
                            },
                            btn2: function () {
                                layer.close(index_add);
                            },
                            content: $('.setAdd-attendeeForm').html(),//加载该区域的html
                            success: function (obj) {
                                $(obj.selector).find('input[name=attendeeId]').val(data.attendeeId);
                                $(obj.selector).find('input[name=attendeeName]').val(data.attendeeName);
                                $(obj.selector).find('input[name=attendeeJob]').val(data.attendeeJob);
                                $(obj.selector).find('textarea[name=remark]').val(data.remark);
                                form.render();
                            }
                        });
                        break;
                }
            });
            table.on('tool(absentTable)', function (obj) {
                var data = obj.data;
                switch (obj.event) {
                    case 'edit':
                        var index_add = layer.open({
                            offset: '10px',
                            title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>编辑缺席人员',
                            maxmin: false,
                            area: ['580px', '90%'],//高度自适应
                            type: 1,//页面层
                            shadeClose: false,
                            btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                            btnAlign: 'c',
                            yes: function () {
                                $("[lay-filter='formAbsentAdd']").click();
                                layer.close(index_add);
                                return false;
                            },
                            btn2: function () {
                                layer.close(index_add);
                            },
                            content: $('.setAdd-absentForm').html(),//加载该区域的html
                            success: function (obj) {
                                $(obj.selector).find('input[name=attendeeId]').val(data.attendeeId);
                                $(obj.selector).find('input[name=attendeeName]').val(data.attendeeName);
                                $(obj.selector).find('input[name=reason]').val(data.reason);
                                $(obj.selector).find('input[name=assignor]').val(data.assignor);
                                $(obj.selector).find('textarea[name=remark]').val(data.remark);
                                form.render();
                            }
                        });
                        break;
                }
            });
            table.on('tool(attenderTable)', function (obj) {
                var data = obj.data;
                switch (obj.event) {
                    case 'edit':
                        var index_add = layer.open({
                            offset: '10px',
                            title: '<i class="iconfont icon-SZYD-xitongcaidanguanli"></i>编辑常设人员',
                            maxmin: false,
                            area: ['580px', '90%'],//高度自适应
                            type: 1,//页面层
                            shadeClose: false,
                            btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                            btnAlign: 'c',
                            yes: function () {
                                $("[lay-filter='formAttenderAdd']").click();
                                layer.close(index_add);
                                return false;
                            },
                            btn2: function () {
                                layer.close(index_add);
                            },
                            content: $('.setAdd-attenderForm').html(),//加载该区域的html
                            success: function (obj) {
                                $(obj.selector).find('input[name=attenderId]').val(data.attenderId);
                                $(obj.selector).find('input[name=attenderSuName]').val(data.attenderSuName);
                                $(obj.selector).find('input[name=attenderJob]').val(data.attenderJob);
                                form.render();
                            }
                        });
                        break;
                }
            });
            table.on('tool(meetingFile)', function (obj) {
                var data = obj.data;

                switch (obj.event) {
                    case 'load':

                        var sURL = baseUrl + "dfsmgr/file/filesDownload?fid=" + data.fiId;
                        
                        window.location.href = sURL;
                        break;
                    case "check":
                        common.pdfPreview(data.fiId, data.fiSuffix);
                        break;
                    case "upFile":

                        if (!fileSortData[common.arrayIndexOf(fileSortData, 'fiId', obj.data.fiId) - 1]) {
                            layer.msg('无法上移');
                            return false;
                        }


                        var upFileLayer = layer.confirm("确定上移文件?", {
                            btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消']
                        }, function (index, layero) {
                            $.when(
                                common.fetchPost("dfsmgr/file/updateFileInfo", {
                                    fiId: obj.data.fiId,
                                    ggSort: obj.data.ggSort - 1
                                }),//当前条
                                common.fetchPost("dfsmgr/file/updateFileInfo", {
                                    fiId: fileSortData[common.arrayIndexOf(fileSortData, 'fiId', obj.data.fiId) - 1].fiId,
                                    ggSort: fileSortData[common.arrayIndexOf(fileSortData, 'fiId', obj.data.fiId) - 1].ggSort + 1
                                })//上一条
                            ).done(function (res1, res2) {
                                if (res1.success && res2.success) {
                                    table.reload("meetingFileTableReload");
                                    layer.msg("上移成功");
                                    layer.close(upFileLayer);
                                } else {
                                    layer.msg('上移失败');
                                }
                            });
                        });
                        break;
                    case "downFile":
                        if (!fileSortData[common.arrayIndexOf(fileSortData, 'fiId', obj.data.fiId) + 1]) {
                            layer.msg('无法下移');
                            return false;
                        }
                        var downFileLayer = layer.confirm("确定下移文件?", {
                            btn: ['<i class="fa fa-check-circle"></i>确定', '<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消']
                        }, function (index, layero) {
                            $.when(
                                common.fetchPost("dfsmgr/file/updateFileInfo", {
                                    fiId: obj.data.fiId,
                                    ggSort: obj.data.ggSort + 1
                                }),//当前条
                                common.fetchPost("dfsmgr/file/updateFileInfo", {
                                    fiId: fileSortData[common.arrayIndexOf(fileSortData, 'fiId', obj.data.fiId) + 1].fiId,
                                    ggSort: fileSortData[common.arrayIndexOf(fileSortData, 'fiId', obj.data.fiId) + 1].ggSort - 1
                                })//下一条
                            ).done(function (res1, res2) {
                                if (res1.success && res2.success) {
                                    table.reload("meetingFileTableReload");
                                    layer.msg("下移成功");
                                    layer.close(downFileLayer);
                                } else {
                                    layer.msg('下移失败');
                                }
                            });
                        });
                        break;
                }
            });

            // common.buttonLimit();
        });

    </script>

    <!--[if lt IE 9]>
<script src="../../js/lib/html5.min.js"></script>
<script src="../../js/lib/respond.js"></script>
<![endif]-->
</body>

</html>