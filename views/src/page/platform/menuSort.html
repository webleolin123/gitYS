<!DOCTYPE html>
<html  class="iframe-h">
<head>
    <meta charset="UTF-8">
    <title>菜单排序</title>
    <meta content="webkit" name="renderer"/>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link class="favicon" href="./../../images/ico/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link class="favicon" href="./../../images/ico/favicon.ico" rel="icon" type="image/x-icon">
    <link class="favicon" href="./../../images/ico/favicon.ico" rel="bookmark" type="image/x-icon">
    <link rel="stylesheet" href="../../js/layui/css/layui.css"/>
    <link href="../../css/public.css?v1.01" rel="stylesheet"/>
    <link href="../../js/lib/font-awesome/css/font-awesome.css" rel="stylesheet"/>
    <script src="../../js/lib/jquery.1.12.3.js"></script>
    <script charset="utf-8" src="../../js/common/plugin.js"></script>

    <style>
        .white-bg{
            background: white;
        }
        .iframe-h{
            height: 100%;
        }
        .content-wrap{
            padding: 10px;
        }
        .red{
            color: red;
        }
        .hide{
            display: none;
        }
        .adapt{
            margin-top: 15px;
            margin-left: 10%;
        }
    </style>
</head>
<!--添加按钮中的弹框-->
<div class="userLayer hide">
    <div style="padding: 15px 20px">
        <form class="layui-form layui-form-pane" name="userLayer">
            <div class="layui-form-item">
                <label class="layui-form-label"><b class="red">*</b>姓名 </label>
                <div class="layui-input-block">
                    <input type="text" name="suName" required  lay-verify="required" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><b class="red">*</b>登入账号 </label>
                <div class="layui-input-block">
                    <input type="text" name="suLoginCode" required  lay-verify="required" placeholder="请输入登入账号" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"><b class="red">*</b>序号 </label>
                <div class="layui-input-block">
                    <input type="number" name="ggUpdateEid" required  lay-verify="required" placeholder="请输入序号" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">手机号</label>
                <div class="layui-input-block">
                    <input type="text" name="suTel" placeholder="请输入手机号" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">身份证</label>
                <div class="layui-input-block">
                    <input type="text" name="suCnid" placeholder="请输入手机号" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">职务</label>
                <div class="layui-input-block">
                    <select name="ggCreateUser"  id="ggCreateUser">
                        <option value=""></option>
                        <option value="0">职务1</option>
                        <option value="1">职务2</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">企业</label>
                <div class="layui-input-block">
                    <select name="comppa" >
                        <option value=""></option>
                        <option value="0">企业1</option>
                        <option value="1">企业2</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">单选框</label>
                <div class="layui-input-block">
                    <input type="radio" name="sex" value="男" title="男" checked>
                    <input type="radio" name="sex" value="女" title="女">
                </div>
            </div>
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md6">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>部门 </label>
                        <div class="layui-input-block">
                            <input type="text" name="title" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="layui-col-md6">
                    <div class="layui-form-item">
                        <label class="layui-form-label"><b class="red">*</b>岗位 </label>
                        <div class="layui-input-block">
                            <input type="text" name="title" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-form-item adapt">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="formDemo"> <i class="layui-icon">&#x1005;</i>保存</button>
                    <button type="reset" class="layui-btn layui-btn-primary"><i class="fa fa-eraser"></i>重置</button>
                </div>
            </div>
        </form>
    </div>
</div>

<body class="iframe-h">

<div class="content-wrap">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-xs2 layui-col-sm2 layui-col-md2">
            <!-- layui tree-->

            <div class="layui-card">
                <div class="layui-card-header layui-card-header-custom"><span><i></i>组织机构数</span></div>
                <div class="layui-card-body">
                    <ul id="leftTree" class="layuiTree"></ul>
                </div>
            </div>
        </div>
        <div class="layui-col-xs10 layui-col-sm10 layui-col-md10">
            <div class="layui-collapse white-bg">
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title white-bg">查询条件</h2>
                    <div class="layui-colla-content">
                        <!--layui-form-pane-->
                        <form action="" class="layui-form layui-form-pane">
                            <div class="layui-row layui-col-space1">
                                <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">输入框</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">输入框</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                </div>

                                <div class="layui-col-md-11">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">下拉选择</label>
                                        <div class="layui-input-block">
                                            <select name="city" lay-verify="required">
                                                <option value=""></option>
                                                <option value="0">option1</option>
                                                <option value="1">option2</option>
                                                <option value="2">option3</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">单选框</label>
                                    <div class="layui-input-block">
                                        <input type="radio" name="sex" value="单选1" title="单选1">
                                        <input type="radio" name="sex" value="单选2" title="单选2" checked>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit lay-filter="formSearch"><i class="fa fa-search"></i>查询</button>
                                        <button type="reset" class="layui-btn layui-btn-primary"><i class="fa fa-eraser"></i>重置</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
            <div class="layui-card" style="margin-top: 10px">
                <div class="layui-card-body">
                    <table id="table1" lay-filter="table1"></table>
                    <script type="text/html" id="tableToolBar">
                        <div class="layui-btn-container">
                            <button class="layui-btn layui-btn-sm" lay-event="add">
                                <i class="layui-icon">&#xe608;</i> 新增
                            </button>
                            <button class="layui-btn layui-btn-sm" lay-event="delete">
                                <i class="layui-icon">&#xe640;</i> 删除
                            </button>
                            <button class="layui-btn layui-btn-sm" lay-event="start">
                                <i class="layui-icon ">&#x1005;</i> 启动
                            </button>
                            <button class="layui-btn layui-btn-sm layui-btn-warm" lay-event="forbid">
                                <i class="layui-icon ">&#x1007;</i> 禁用
                            </button>
                        </div>
                    </script>

                    <script type="text/html" id="tableOper">
                        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
                        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="resetP">重置密码</a>
                    </script>

                </div>
            </div>
        </div>
    </div>
</div>


<script src="./../../js/layui/layui.js"></script>
<script>

    /*layui.config({
        base: '../../../src/js/',
        version: new Date().getTime()
    }).extend({
        userManage:'module/systemManage/userManage'
    }).use('userManage',layui.factory('userManage'))*/




    //单窗口 跨域通信
    window.addEventListener('message',function(event){
        if(event && event.data){
            //设置页面上的主题颜色
            window.document.documentElement.setAttribute("primaryColor",event.data);
        }

    }, false);

    layui.config({
        base: '../../../src/js/',
        version: new Date().getTime()
    }).extend({
        userManage:'module/systemManage/userManage',
    }).use(['tree','layer','table','form','laytpl','util','common'],function () {
        var common=layui.common;
        var table=layui.table;
        var util = layui.util;
        var form=layui.form;
        index.output();//index相关配置
        //接口请求demo
        // common.fetchGet('users',function (data) {
        //     debugger
        // });
        common.themeSet();
        common.fetchGet('servlet/regCode',function (data) {
        });

        //tree
        layui.tree({
            elem: '#leftTree',
            nodes:[
                {
                    name:'父节点',
                    spread:true,//展开
                    children:[
                        {
                            name:'子节点1',
                        },
                        {
                            name:'子节点2'
                        },
                        {
                            name:'子节点3',
                        }
                    ]

                },
                {
                    name:'节点2'
                },
                {
                    name:'父节点3',
                    children:[
                        {
                            name:'子节点1',
                            id:112
                        },
                        {
                            name:'子节点2'
                        },
                        {
                            name:'子节点3',
                            children:[
                                {
                                    name:'子节点1',
                                },
                                {
                                    name:'子节点2'
                                },
                                {
                                    name:'子节点3',
                                }
                            ]
                        }
                    ]

                },
                {
                    name:'父节点3',
                    spread:true,//展开
                    children:[
                        {
                            name:'子节点1',
                            id:112
                        },
                        {
                            name:'子节点2'
                        },
                        {
                            name:'子节点3',
                            children:[
                                {
                                    name:'子节点1',
                                },
                                {
                                    name:'子节点2'
                                },
                                {
                                    name:'子节点3',
                                }
                            ]
                        }
                    ]

                },
                {
                    name:'父节点3',
                    spread:true,//展开
                    children:[
                        {
                            name:'子节点1',
                            id:112
                        },
                        {
                            name:'子节点2'
                        },
                        {
                            name:'子节点3',
                            children:[
                                {
                                    name:'子节点1',
                                },
                                {
                                    name:'子节点2'
                                },
                                {
                                    name:'子节点3',
                                }
                            ]
                        }
                    ]

                },
                {
                    name:'父节点3',
                    spread:true,//展开
                    children:[
                        {
                            name:'子节点1',
                            id:112
                        },
                        {
                            name:'子节点2'
                        },
                        {
                            name:'子节点3',
                            children:[
                                {
                                    name:'子节点1',
                                },
                                {
                                    name:'子节点2'
                                },
                                {
                                    name:'子节点3',
                                }
                            ]
                        }
                    ]

                }
            ],
            skin:'theme',
            click:function (node) {

            },

        });

        table.render({
            elem: '#table1',
            height:  'full-200',
            // url: '/s',
            data:[],
            toolbar:'#tableToolBar',
            cols: [
                [
                    {type:'checkbox'},
                    {field: 'suName', title: '名称', width:200,  sort: true, },
                    {field: 'suLoginCode', title: '账号',sort:true},
                    {field: 'suSex', title: '性别', width: 80, sort: true,templet:function (rowData) {
                            return (rowData==='1')?'男':'女';
                        }},
                    {field: 'suTel', title: '手机', sort: true},
                    {field: 'suCnid', title: '身份证',  sort: true},
                    {field: 'ggUpdateDatetime', title: '最后登入时间',  sort: true,templet:function (rowData) {
                            return util.toDateString(rowData['ggUpdateDatetime']);
                        }},
                    {field: '5', title: '状态', width: 100, sort: true,
                        templet:function (rowData) {
                            return '<span class="layui-badge" style="background-color:#66c33a">启用</span>'
                        }
                    },
                    {field: '', title: '操作', width: 150, toolbar:'#tableOper',fixed: 'right'},
                ]
            ],
            page:true
        });


        //table监听事件
        table.on('toolbar(table1)',function (obj) {
            var checkStatus = table.checkStatus(obj.config.id);
            switch(obj.event){
                case 'add':
                    //点击添加按钮
                    //  common.clearForm($('.userLayer'));
                    layer.open({
                        offset: '10px',
                        title: '新增',
                        maxmin: false,
                        type: 1,//页面层
                        area: ['580px'],//高度自适应
                        maxHeight:'200px',
                        shadeClose: false,
                        content: $('.userLayer').html(),//加载该区域的html
                        // btn:['<i class="fa fa-check-circle"></i>确定','<i class="icon iconfont icon-button-cha-2" style="margin-right: 3px"></i>取消'],
                        success:function(){
                            form.render();
                        },
                        yes:function (index,layero) {
                            //点击确定 删除选中列
                            //:todo

                            layer.close(layer.index)
                        },
                        btn2:function (index,layero) {
                            //点击取消
                            layer.close(layer.index)
                        }

                    });
                    break;
                case 'delete':
                    //点击删除按钮
                    if(checkStatus.data.length>0){
                        layer.confirm('确定删除选中列?', {icon: 3, title:'提示',offset: '150px'}, function(index){

                            layer.close(index);
                        });
                    }else{
                        layer.msg('请选择删除列')
                    }
                    break;
                case 'start':
                    layer.msg('启动');
                    break;
                case 'forbid':
                    layer.msg('禁止');
                    break;
            }
        });

        table.on('tool(table1)', function(obj){
            var data = obj.data;
            switch(obj.event){
                case 'singleDel':
                    layer.confirm('确定删除该记录?', {icon: 3, title:'提示',offset: '150px'}, function(index){
                        //todo:确认删除选中列
                        layer.close(index);
                        layer.msg('删除成功')
                    });
                    break;
                case 'resetP':
                    layer.confirm('确定重置密码?', {icon: 3, title:'提示',offset: '150px'}, function(index){
                        //todo:确认删除选中列
                        layer.close(index);
                        layer.msg('重置成功')
                    });
                    break;
                case 'edit'://编辑
                    //原始数据导入
                    layer.open({
                        offset: '10px',
                        title:'编辑',
                        maxmin: false,
                        type: 1,//页面层
                        area: ['580px'],//高度自适应
                        shadeClose: false,
                        content: $('.userLayer').html(),//加载该区域的html
                        success:function (obj) {

                            //初始化表格
                            form.render();

                            $(obj.selector).find('input[name=suName]').val(data.suName);
                            $(obj.selector).find('input[name=suLoginCode]').val(data.suLoginCode);
                            $(obj.selector).find('input[name=ggUpdateEid]').val(data.ggUpdateEid);
                            $(obj.selector).find('input[name=suTel]').val(data.suTel);
                            $(obj.selector).find('input[name=suCnid]').val(data.suCnid);
                            $(obj.selector).find('#ggCreateUser').val(data.ggCreateUser);
                        }
                    });
                    break;
            }

        });
    });

</script>

<!--[if lt IE 9]>
<script src="../../js/lib/html5.min.js"></script>
<script src="../../js/lib/respond.js"></script>
<![endif]-->
</body>
</html>
